<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whale Behavior Analysis</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .visualization-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .visualization-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .visualization-card {
            flex: 1;
            min-width: 300px;
            max-width: 600px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .visualization-card img {
            width: 100%;
            height: auto;
        }
        
        .visualization-card h3 {
            padding: 10px 15px;
            margin: 0;
            background: #f5f5f5;
            border-bottom: 1px solid #ddd;
        }
        
        .visualization-card .content {
            padding: 15px;
        }
        
        .metrics-dashboard {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .dive-selector {
            margin-bottom: 20px;
        }
        
        .dive-selector input {
            width: 100%;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .metric-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            text-align: center;
        }
        
        .metric-card h4 {
            margin-top: 0;
            color: #666;
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
        }
        
        .tab-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .tab-buttons {
            display: flex;
            background: #f5f5f5;
        }
        
        .tab-button {
            padding: 10px 20px;
            border: none;
            background: none;
            cursor: pointer;
            flex: 1;
            font-weight: bold;
        }
        
        .tab-button.active {
            background: #3498db;
            color: white;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Rubric Navigation */
        .rubric-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #2c3e50;
            color: white;
            padding: 10px 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .rubric-nav-container {
            display: flex;
            justify-content: space-around;
            max-width: 1200px;
            margin: 0 auto;
            flex-wrap: wrap;
        }
        
        .rubric-nav-item {
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s;
            margin: 5px;
            font-weight: bold;
            text-align: center;
        }
        
        .rubric-nav-item:hover {
            background-color: #3498db;
        }
        
        .rubric-nav-item.active {
            background-color: #3498db;
        }
        
        /* Adjust regular navbar for coexistence with rubric nav */
        .navbar {
            margin-top: 60px; /* Make room for rubric nav */
        }
        
        #content-container {
            margin-top: 60px; /* Adjust for rubric nav */
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .rubric-nav-container {
                flex-direction: column;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-out;
            }
            
            .rubric-nav-container.expanded {
                max-height: 500px;
            }
            
            .rubric-nav-item {
                width: 100%;
                box-sizing: border-box;
                padding: 8px 10px;
                margin: 2px;
            }
            
            .navbar {
                margin-top: 50px; /* Reduced margin for rubric toggle button */
                flex-wrap: wrap;
                justify-content: center;
                padding: 0;
                max-height: 50px;
                overflow: hidden;
                transition: max-height 0.3s ease-out;
            }
            
            .navbar.expanded {
                max-height: 400px;
            }
            
            .navbar a {
                width: 100%;
                padding: 8px 0;
                margin: 0;
                text-align: center;
                border-radius: 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            #content-container {
                margin-top: 100px; /* Reduced margin */
            }
            
            .rubric-toggle-btn, .navbar-toggle-btn {
                position: fixed;
                z-index: 1100;
                background-color: #2c3e50;
                color: white;
                border: none;
                width: 40px;
                height: 40px;
                border-radius: 5px;
                cursor: pointer;
                display: none; /* Hidden by default, shown by JS on mobile */
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 5px;
            }
            
            .rubric-toggle-btn {
                top: 5px;
                right: 5px;
            }
            
            .navbar-toggle-btn {
                top: 55px;
                right: 5px;
            }
            
            .toggle-icon {
                width: 20px;
                height: 2px;
                background-color: white;
                margin: 3px 0;
                transition: 0.3s;
            }
            
            .rubric-toggle-btn.active .toggle-icon:nth-child(1) {
                transform: rotate(-45deg) translate(-5px, 5px);
            }
            
            .rubric-toggle-btn.active .toggle-icon:nth-child(2) {
                opacity: 0;
            }
            
            .rubric-toggle-btn.active .toggle-icon:nth-child(3) {
                transform: rotate(45deg) translate(-5px, -5px);
            }
            
            .navbar-toggle-btn.active .toggle-icon:nth-child(1) {
                transform: rotate(-45deg) translate(-5px, 5px);
            }
            
            .navbar-toggle-btn.active .toggle-icon:nth-child(2) {
                opacity: 0;
            }
            
            .navbar-toggle-btn.active .toggle-icon:nth-child(3) {
                transform: rotate(45deg) translate(-5px, -5px);
            }
        }
        
        @media (max-width: 480px) {
            .navbar {
                margin-top: 50px;
            }
            
            #content-container {
                margin-top: 100px;
                padding-top: 0;
            }
            
            section {
                padding-top: 30px;
            }
        }
        
        /* Modal styles for rubric slides */
        .rubric-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            overflow: auto;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .rubric-modal.show {
            display: block;
            opacity: 1;
        }
        
        .rubric-slide {
            position: relative;
            width: 90%;
            max-width: 1000px;
            background-color: #1e2126;
            color: #ffffff;
            margin: 50px auto;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .close-modal:hover {
            color: #fff;
        }
        
        .rubric-slide h2 {
            color: #3498db;
            margin-top: 0;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .slide-section {
            margin-bottom: 20px;
        }
        
        .slide-section h3 {
            color: #5dade2;
            margin-bottom: 10px;
        }
        
        .data-point {
            background-color: #2c3e50;
            border-left: 4px solid #3498db;
            padding: 10px 15px;
            margin-bottom: 15px;
            border-radius: 0 4px 4px 0;
        }
        
        .highlight-box {
            background-color: #2c3e50;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .metric-point {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .feature-tag {
            display: inline-block;
            background-color: #2c3e50;
            color: #5dade2;
            padding: 5px 10px;
            border-radius: 4px;
            margin-right: 8px;
            margin-bottom: 8px;
            font-size: 14px;
            border: 1px solid #3498db;
        }
        
        /* Architecture Section */
        section#architecture {
            background-color: #121212;
        }
        
        /* Training Section */
        section#training {
            background-color: #121212;
        }
        
        /* Conclusions Section */
        section#conclusions {
            background-color: #121212;
        }
        
        /* Resources Section */
        section#resources {
            background-color: #121212;
        }
        
        /* Validation Results Section */
        section#validation {
            background-color: #121212;
        }
        
        /* Change all warning/notice boxes to dark background with light text */
        .warning-box, .data-point, .notice-box, .metrics-box {
            background-color: #1e2126 !important;
            color: #f0f0f0 !important;
            border-left: 5px solid #e74c3c !important;
        }
        
        .warning-box h3, .warning-box h4, .data-point h3, .data-point h4, .notice-box h3, .notice-box h4 {
            color: #f1948a !important;
        }
        
        .warning-box p, .data-point p, .notice-box p, .metrics-box p, 
        .warning-box li, .data-point li, .notice-box li, .metrics-box li {
            color: #f0f0f0 !important;
        }
        
        .warning-box strong, .data-point strong, .notice-box strong {
            color: #f39c12 !important;
        }
        
        /* Fix metric boxes */
        .metric-card {
            background-color: #2c3e50 !important;
            border: 1px solid #3498db !important;
        }
        
        .metric-card h4 {
            color: #f0f0f0 !important;
        }
        
        .metric-value {
            color: #3498db !important;
        }
        
        /* Fix architecture boxes */
        .pipeline-stage, .model-section {
            background-color: #1e2126 !important;
        }
        
        .pipeline-stage ul, .model-section ul {
            color: #f0f0f0 !important;
        }
        
        .pipeline-stage .stage-title, .model-section h3 {
            color: #5dade2 !important;
        }
        
        /* Fix low contrast text in tables */
        table, th, td {
            color: #f0f0f0 !important;
        }
        
        /* Fix visualization card text */
        .visualization-card .content {
            color: #f0f0f0 !important;
            background-color: #2c3e50 !important;
        }
        
        .visualization-card h3 {
            background-color: #1e2126 !important;
            color: #5dade2 !important;
        }
        
        /* Fix tabs */
        .tab-content {
            background-color: #2c3e50 !important;
            color: #f0f0f0 !important;
        }
        
        /* Center elements in Interactive Feature Matrix */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
            justify-items: center;
            text-align: center;
        }
        
        .metric-card {
            width: 100%;
            padding: 20px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background-color: #2c3e50; /* Default background */
            color: white;
        }
        
        .color-slider {
            -webkit-appearance: none;
            width: 80%;
            height: 10px;
            border-radius: 5px;
            background: linear-gradient(to right, 
                hsl(0, 80%, 40%), 
                hsl(60, 80%, 40%), 
                hsl(120, 80%, 40%), 
                hsl(180, 80%, 40%), 
                hsl(240, 80%, 40%), 
                hsl(300, 80%, 40%),
                hsl(360, 80%, 40%));
            outline: none;
        }
        
        .color-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .color-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .metric-card h4 {
            margin-top: 0;
            margin-bottom: 10px;
            color: white;
            text-align: center;
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-align: center;
        }
        
        .dive-selector {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .dive-selector input {
            width: 80%;
            margin-top: 10px;
        }
        
        .tab-content {
            display: none;
            text-align: center;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .visualization-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .visualization-card {
            width: 100%;
            max-width: 800px;
            margin: 20px;
            text-align: center;
        }
        
        .visualization-card h3 {
            margin-top: 0;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .visualization-card img {
            max-width: 100%;
            height: auto;
            margin: 0 auto;
            display: block;
        }
        
        .visualization-card .content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* Training Section Styles */
        .training-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .training-card {
            background: #2c3e50;
            padding: 15px;
            border-radius: 8px;
            color: #f0f0f0;
        }
        
        .data-prep-card {
            border-left: 4px solid #3498db;
        }
        
        .training-config-card {
            border-left: 4px solid #e74c3c;
        }
        
        .training-card h4 {
            margin-top: 0;
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .training-config-card h4 {
            color: #e74c3c;
        }
        
        .training-process {
            background: #2c3e50;
            padding: 20px;
            border-radius: 8px;
            color: #f0f0f0;
            margin-top: 15px;
        }
        
        .process-steps {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .process-step {
            flex: 1;
            text-align: center;
            padding: 0 10px;
            min-width: 150px;
            margin-bottom: 10px;
        }
        
        .step-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #3498db;
        }
        
        .augmentation-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            color: #f0f0f0;
            background-color: #1e2126;
        }
        
        .augmentation-table th {
            background-color: #2c3e50;
            border: 1px solid #555;
            padding: 8px;
            text-align: left;
        }
        
        .augmentation-table td {
            border: 1px solid #555;
            padding: 8px;
        }
        
        .metrics-note {
            background-color: #2c3e50;
            border-left: 5px solid #e74c3c;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .metrics-note h4 {
            color: #f1948a;
            margin-top: 0;
        }
        
        /* System Architecture Styles */
        .architecture-container {
            max-width: 1000px;
            margin: 0 auto 30px auto;
            font-family: 'Arial', sans-serif;
        }
        
        .architecture-card {
            border: 2px solid #3498db;
            border-radius: 8px;
            background: #1e2126;
            padding: 20px;
        }
        
        .architecture-title {
            text-align: center;
            margin-top: 0;
            color: #3498db;
            border-bottom: 1px solid #444;
            padding-bottom: 10px;
        }
        
        .pipeline-stages {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .pipeline-stage {
            flex: 1;
            min-width: 220px;
            margin: 10px;
            border: 2px solid;
            border-radius: 8px;
            background: #2c3e50;
            padding: 15px;
        }
        
        .stage-data-processing {
            border-color: #3498db;
        }
        
        .stage-feature-extraction {
            border-color: #9b59b6;
        }
        
        .stage-model-training {
            border-color: #2ecc71;
        }
        
        .stage-behavior-classification {
            border-color: #e74c3c;
        }
        
        .stage-title {
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .stage-data-processing .stage-title {
            color: #3498db;
        }
        
        .stage-feature-extraction .stage-title {
            color: #9b59b6;
        }
        
        .stage-model-training .stage-title {
            color: #2ecc71;
        }
        
        .stage-behavior-classification .stage-title {
            color: #e74c3c;
        }
        
        .stage-list {
            margin: 0;
            padding-left: 20px;
            font-size: 14px;
            color: #f0f0f0;
        }
        
        .stage-list li {
            margin-bottom: 8px;
        }
        
        .stage-arrow {
            text-align: center;
            margin-top: 15px;
        }
        
        .stage-data-processing .stage-arrow {
            color: #3498db;
        }
        
        .stage-feature-extraction .stage-arrow {
            color: #9b59b6;
        }
        
        .stage-model-training .stage-arrow {
            color: #2ecc71;
        }
        
        /* Left-side presentation navbar */
        .presentation-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 200px;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding-top: 60px;
            z-index: 900;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .presentation-sidebar-title {
            padding: 10px 15px;
            text-align: center;
            color: #3498db;
            font-size: 14px;
            border-bottom: 1px solid #333;
            margin-bottom: 15px;
        }
        
        .presentation-nav {
            display: flex;
            flex-direction: column;
            padding: 0 10px;
        }
        
        .presentation-nav button {
            background: transparent;
            border: none;
            color: white;
            padding: 8px 12px;
            text-align: left;
            margin: 3px 0;
            cursor: pointer;
            border-radius: 3px;
            transition: all 0.3s;
        }
        
        .presentation-nav button:hover {
            background-color: rgba(52, 152, 219, 0.2);
        }
        
        .presentation-nav button.active {
            background-color: rgba(52, 152, 219, 0.4);
            border-left: 3px solid #3498db;
        }
        
        /* Adjust main content to account for sidebar */
        section {
            margin-left: 200px;
        }
        
        .navbar {
            margin-left: 200px;
        }
        
        /* Make modals use third-person language */
        .modal-content {
            padding: 20px;
        }
        
        .stage-model-training .stage-arrow {
            color: #2ecc71;
        }
        
        /* Modal Styles */
        .rubric-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .rubric-modal.show {
            display: block;
            opacity: 1;
        }
        
        .rubric-slide {
            display: none;
            background-color: #1e2126;
            margin: 10% auto;
            padding: 30px;
            border-radius: 8px;
            width: 80%;
            max-width: 800px;
            color: #f0f0f0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
        }
        
        .close-modal:hover {
            color: #fff;
        }
        
        .slide-section {
            margin-bottom: 25px;
        }
        
        .highlight-box {
            background-color: #2c3e50;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .data-point {
            background-color: #2c3e50;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }
        
        .metric-point {
            background-color: #2c3e50;
            padding: 10px 15px;
            border-radius: 5px;
            display: inline-block;
            font-weight: bold;
        }
        
        .feature-tag {
            display: inline-block;
            background-color: #34495e;
            color: #3498db;
            padding: 5px 10px;
            margin: 3px;
            border-radius: 3px;
            font-size: 12px;
        }
        
        /* Left-side presentation navbar */
        .presentation-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 200px;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding-top: 60px;
            z-index: 900;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>
    <!-- Rubric Slides Modal -->
    <div id="rubricModal" class="rubric-modal">
        <!-- Title Slide -->
        <div id="title-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Whale Behavior Classification</h2>
            <div class="slide-section">
                <h3>Project Overview</h3>
                <p>An end-to-end pipeline for automated classification and visualization of whale behaviors from sensor data.</p>
                
                <div class="highlight-box">
                    <p><strong>Key Contributions:</strong></p>
                    <ul>
                        <li>Hierarchical visualization system for exploring dive patterns</li>
                        <li>Custom minGRU architecture optimized for limited datasets</li>
                        <li>Feature extraction methodology from high-dimensional sensor data</li>
                        <li>Dashboard for marine biologists to explore behaviors and metrics</li>
                    </ul>
                </div>
            </div>
            
            <div class="slide-section">
                <h3>Project Goals</h3>
                <div class="highlight-box">
                    <ul>
                        <li><strong>Annotation Acquisition:</strong> Additional expert annotations required from the Parks Lab</li>
                        <li><strong>Parallelization of RNN:</strong> Implementation of parallel processing in the minGRU architecture</li>
                        <li><strong>Architecture Optimization:</strong> Exploration of Optisim/complexity-aware model architecture search</li>
                        <li><strong>Model Refinement:</strong> Fine-tuning as more data becomes available</li>
                        <li><strong>Transfer Learning:</strong> Maximizing utility of limited data</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Problem Slide -->
        <div id="problem-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Problem & Stakeholders</h2>
            
            <div class="slide-section">
                <h3>Domain Problem</h3>
                <p>Understanding marine mammal behavior patterns is crucial for conservation efforts and ecological research. Traditional methods of behavior classification rely on expert annotations, which are time-consuming and limited in scale.</p>
            </div>
            
            <div class="slide-section">
                <h3>Primary Stakeholder</h3>
                <div class="data-point">
                    <p>The Parks Lab at Syracuse University's Bioinspired Institute collects extensive whale sensor data but struggles with efficient behavior classification and analysis at scale.</p>
                </div>
            </div>
            
            <div class="slide-section">
                <h3>Stakeholder Needs</h3>
                <ul>
                    <li>Automated classification of whale behaviors from sensor data</li>
                    <li>Tools to visualize dive patterns and associated behaviors</li>
                    <li>Methods to identify previously unknown behavior patterns</li>
                    <li>Insights into energetic costs of different behaviors</li>
                </ul>
            </div>
        </div>
        
        <!-- Solution Slide -->
        <div id="solution-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Envisioned Solution</h2>
            
            <div class="slide-section">
                <h3>Solution Overview</h3>
                <p>A comprehensive behavior analysis pipeline that combines machine learning classification with interactive visualization tools to transform raw sensor data into actionable insights for marine biologists.</p>
            </div>
            
            <div class="slide-section">
                <h3>Key Components</h3>
                <ul>
                    <li><strong>Hierarchical Classification Model:</strong> Using minGRU architecture to classify whale behaviors from sensor data</li>
                    <li><strong>Interactive Visualizations:</strong> Tools for exploring dive patterns and associated behaviors</li>
                    <li><strong>Dimensionality Reduction:</strong> Techniques to identify patterns and clusters in high-dimensional sensor data</li>
                    <li><strong>Energetics Analysis:</strong> Models to estimate energy expenditure associated with different behaviors</li>
                </ul>
            </div>
            
            <div class="slide-section">
                <h3>Connection to Stakeholder Needs</h3>
                <p>This solution enables the Parks Lab to efficiently process large volumes of sensor data, automatically classify behaviors, visualize patterns, and gain insights that would be impossible with manual annotation alone.</p>
            </div>
        </div>
        
        <!-- Data Slide -->
        <div id="data-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Data</h2>
            
            <div class="slide-section">
                <h3>Dataset Overview</h3>
                <ul>
                    <li><strong>Source:</strong> Syracuse University's Bioinspired Institute Parks Lab</li>
                    <li><strong>Format:</strong> HDF5 files containing sensor readings from whale tags</li>
                    <li><strong>Scope:</strong> ~20,000 frames with approximately 50 expert annotations</li>
                    <li><strong>Features:</strong> Accelerometer (3 axes), gyroscope (3 axes), depth, and other environmental sensors</li>
                    <li><strong>Behaviors:</strong> 9 distinct behavior classes (Feeding_loop, Kick_feeding, Noodle_feeding, etc.)</li>
                </ul>
            </div>
            
            <div class="slide-section">
                <h3>Data Limitations</h3>
                <div class="highlight-box" style="background-color: #fdedec; border-left: 4px solid #e74c3c;">
                    <p><strong>Critical Limitations:</strong></p>
                    <ul>
                        <li>Severe class imbalance (6 vs 216 samples for different behaviors)</li>
                        <li>Limited annotation volume (only ~50 total expert-validated behaviors)</li>
                        <li>Most behavior classes have fewer than 10 samples</li>
                        <li>Some behaviors have only a single example</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Results Slide -->
        <div id="results-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Initial Results</h2>
            
            <div class="slide-section">
                <h3>Dimensionality Reduction Insights</h3>
                <div class="data-point">
                    <p><strong>Trustworthiness Score:</strong> 99.3% - The PCA embeddings successfully preserve local neighborhood structure from high-dimensional space.</p>
                </div>
                <div class="data-point">
                    <p><strong>Feature Matrix Optimization:</strong> From 167 original features (111 static + 56 sequential), a subset of 40-80 most informative features was identified, reducing noise while maintaining discriminative power.</p>
                </div>
                <div class="data-point">
                    <p><strong>Sequence Length Analysis:</strong> Optimal sequence length determined to be 384 timesteps, balancing information preservation and standardization requirements.</p>
                </div>
                
                <div class="highlight-box">
                    <p><strong>Most Informative Features:</strong></p>
                    <div>
                        <span class="feature-tag">Depth variance</span>
                        <span class="feature-tag">Roll angle std</span>
                        <span class="feature-tag">Y-acceleration peaks</span>
                        <span class="feature-tag">Pitch stability</span>
                        <span class="feature-tag">Depth profile</span>
                        <span class="feature-tag">Heading changes</span>
                        <span class="feature-tag">Z-acceleration FFT</span>
                        <span class="feature-tag">Twist coefficient</span>
                    </div>
                </div>
            </div>
            
            <div class="slide-section">
                <h3>Classification Performance</h3>
                <div style="background-color: #fdedec; border-left: 4px solid #e74c3c; padding: 15px; margin-top: 10px;">
                    <h4 style="margin-top: 0; color: #c0392b;">Current Dataset Statistics</h4>
                    <p>Analysis of the dataset reveals the following composition:</p>
                    <ul>
                        <li><strong>Total Samples:</strong> 50 labeled samples (after excluding 'End' label)</li>
                        <li><strong>Feature Matrix:</strong> 167 total features (111 static + 56 sequential)</li>
                        <li><strong>Behavior Types:</strong> 10 unique behavior classes</li>
                    </ul>
                    <p>The technical infrastructure for classification has been implemented, including:</p>
                    <ul>
                        <li>MinGRU architecture with optimized parallel forward pass</li>
                        <li>Feature extraction pipeline with comprehensive feature set</li>
                        <li>Data processing with window segmentation and normalization</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Challenges Slide -->
        <div id="challenges-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Challenges</h2>
            
            <div class="slide-section">
                <h3>Data Challenges</h3>
                <ul>
                    <li>Extreme data scarcity (only ~50 total expert annotations)</li>
                    <li>Severe class imbalance (some behaviors have only 1 sample)</li>
                    <li>Insufficient examples for proper validation</li>
                    <li>High dimensionality of sensor data (3 axes × 384 timesteps)</li>
                </ul>
                
                <div class="data-point">
                    <p><strong>Approach:</strong> SMOTE augmentation, class weights, and dimensional reduction techniques have been applied to mitigate these challenges, but they cannot overcome the fundamental lack of ground truth data.</p>
                </div>
            </div>
            
            <div class="slide-section">
                <h3>Model Challenges</h3>
                <ul>
                    <li>Training instability with small batch sizes</li>
                    <li>Overfitting indicators in validation performance</li>
                    <li>Limited generalization to unseen whales</li>
                    <li>Difficulty distinguishing similar behaviors</li>
                </ul>
                
                <div class="data-point">
                    <p><strong>Approach:</strong> Implementation of the minGRU architecture with fewer parameters (39,690 vs ~120K) and a hierarchical classification approach. Also employed cross-validation with leave-one-out by whale ID.</p>
                </div>
            </div>
        </div>
        
        <!-- Validation Slide -->
        <div id="validation-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Validation Results: Why Our Current Scenario Fails</h2>
            <div class="slide-section">
                <h3>The Analogy</h3>
                <div class="highlight-box">
                    <p>Imagine you want to train a model to tell apples from oranges. But your entire training set only contains apples, all labeled as "apple."<br>
                    The model quickly learns to always say "apple" — and if you test it on more apples, it gets 100% accuracy. But if you ask it to classify the whole produce section (apples, oranges, bananas, etc.), it will still say "apple" every time, and be wrong most of the time.</p>
                </div>
            </div>
            <div class="slide-section">
                <h3>What Actually Happened Here</h3>
                <ul>
                    <li>The dataset: 3,121 windows, all labeled as class 0 ("Unlabeled").</li>
                    <li>We split this into train/val/test sets (70/15/15).</li>
                    <li>The model instantly learns to always predict class 0.</li>
                    <li>Validation and test accuracy are always 100% — but this is trivial, not meaningful.</li>
                    <li>Loss drops to zero, but the model isn't learning anything about real behaviors.</li>
                </ul>
            </div>
            <div class="slide-section">
                <h3>Why This Matters</h3>
                <div class="data-point">
                    <ul>
                        <li>There's no way to validate behavior classification without labeled data for multiple classes.</li>
                        <li>The current validation just confirms the model learned the trivial solution: "always predict class 0."</li>
                        <li>To make progress, we need expert-annotated data with real behavior classes.</li>
                    </ul>
                </div>
            </div>
            <div class="slide-section">
                <h3>Summary of Classification Efforts</h3>
                <ul>
                    <li><strong>Model:</strong> Implemented MinGRU classifier (sequential & parallel).</li>
                    <li><strong>Data:</strong> Feature extraction, windowing, normalization.</li>
                    <li><strong>Training:</strong> Used MPS acceleration, early stopping, learning rate scheduling.</li>
                    <li><strong>Findings:</strong> Model always predicts class 0; parallel implementation works but can't be meaningfully tested.</li>
                </ul>
            </div>
            <div class="slide-section">
                <h3>What's Needed Next</h3>
                <ul>
                    <li>Labeled data with multiple behavior classes.</li>
                    <li>Ground truth annotations from experts.</li>
                    <li>Addressing class imbalance once labels are available.</li>
                </ul>
            </div>
            <div class="slide-section">
                <h3>Visualizations</h3>
                <ul>
                    <li>MinGRU architecture diagram (if available)</li>
                    <li>Feature importance plot (if available)</li>
                    <li>Data distribution plot (if available)</li>
                </ul>
                <p style="color:#aaa;">(Only include these if they are meaningful and available.)</p>
            </div>
        </div>
        
        <!-- Plan Slide -->
        <div id="plan-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Data Needs & Next Steps</h2>
            
            <div class="slide-section">
                <h3>Critical Data Limitations</h3>
                <ul>
                    <li><strong>Extreme Data Scarcity:</strong> Only ~20,000 frames with just 50 expert annotations total</li>
                    <li><strong>Insufficient Examples:</strong> Most behavior classes have fewer than 10 samples</li>
                    <li><strong>Validation Impossible:</strong> Cannot validate without proper ground truth dataset</li>
                    <li><strong>Augmentation Limits:</strong> SMOTE cannot overcome lack of diverse examples</li>
                </ul>
            </div>
            
            <div class="slide-section">
                <h3>Primary Data Needs</h3>
                <p>This project <strong>urgently requires</strong> additional expert-validated behavior annotations from the Parks Lab, particularly for:</p>
                <ul>
                    <li>Underrepresented behavior classes with fewer than 10 examples</li>
                    <li>A proper validation set with sufficient examples of each behavior class</li>
                    <li>More diverse contexts and environmental conditions</li>
                </ul>
            </div>
            
            <div class="slide-section">
                <h3>Final Deliverable</h3>
                <p>The final deliverable will include:</p>
                <ul>
                    <li>A fully functional behavior classification pipeline</li>
                    <li>Interactive dashboard for visualizing dive patterns and behaviors</li>
                    <li>Documentation for Parks Lab researchers to use and extend the system</li>
                    <li>Analysis of model performance and limitations</li>
                    <li>Recommendations for future data collection to improve classification</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="presentation-sidebar">
        <div class="presentation-sidebar-title">
            Whale Behavior Analysis<br>
            <span style="font-size: 12px;">Project Status Presentation</span>
        </div>
        <nav class="presentation-nav">
            <button onclick="scrollToSectionAndShowModal('overview', 'title-slide')" class="active">Title</button>
            <button onclick="scrollToSectionAndShowModal('overview', 'problem-slide')">Problem</button>
            <button onclick="scrollToSectionAndShowModal('hierarchical', 'solution-slide')">Solution</button>
            <button onclick="scrollToSectionAndShowModal('frames', 'data-slide')">Data</button>
            <button onclick="scrollToSectionAndShowModal('dimension', 'results-slide')">Results</button>
            <button onclick="scrollToSectionAndShowModal('architecture', 'challenges-slide')">Challenges</button>
            <button onclick="scrollToSectionAndShowModal('validation', 'validation-slide')">Validation</button>
            <button onclick="scrollToSectionAndShowModal('conclusions', 'plan-slide')">Plan</button>
        </nav>
    </div>
    
    <nav class="navbar">
        <a href="#overview">Overview</a>
        <a href="#frames">Dive Frames</a>
        <a href="#hierarchical">Hierarchical Visualization</a>
        <a href="#interactive">Interactive Dashboard</a>
        <a href="#dimension">Dimensionality Reduction</a>
        <a href="#training">Training</a>
        <a href="#architecture">Architecture</a>
        <a href="#conclusions">Conclusions</a>
        <a href="#resources">Resources</a>
    </nav>

    <div id="content-container">
        <!-- Overview Section -->
        <section id="overview">
            <div class="section-content">
                <h1>Whale Behavior Analysis</h1>
                <h2>Overview of 128 Detected Dives</h2>
                <img src="assets/dive_overview.png" alt="Overview of 128 Detected Dives" class="overview-img">
                <div class="card">
                    <p>This visualization summarizes 128 detected dive patterns, showing depth variations and relative twistiness across multiple dives. Color intensity indicates the relative twistiness of movement during each dive segment.</p>
                </div>
                
                <div class="card">
                    <h3>Project Goals</h3>
                    <ul>
                        <li><strong>Annotation Acquisition:</strong> Acquire additional expert annotations from the Parks Lab</li>
                        <li><strong>Parallelization of RNN:</strong> Implement parallel processing in the minGRU architecture</li>
                        <li><strong>Architecture Optimization:</strong> Explore Optisim/complexity-aware model architecture searching</li>
                        <li><strong>Model Refinement:</strong> Fine-tune as more data becomes available</li>
                        <li><strong>Transfer Learning:</strong> Maximize utility of limited data</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Data Section -->
        <section id="frames">
            <div class="section-content">
                <h2>Dive Frame Analysis</h2>
                <div class="frames-container">
                    <div class="frame-viewer">
                        <img id="current-frame" src="assets/dive_frames/dive_001.png" alt="Dive Frame" class="frame-img">
                        <div class="frame-counter">Frame: <span id="frame-number">1</span> of 128</div>
                    </div>
                    <div class="frame-controls">
                        <button id="prev-frame">Previous</button>
                        <button id="next-frame">Next</button>
                        <button id="play-frames">Play</button>
                    </div>
                    <input type="range" min="1" max="128" value="1" class="frame-selector" id="frame-slider">
                </div>
                <div class="card">
                    <p>Scroll through individual dive frames to analyze specific patterns and behaviors. Each frame represents a unique dive profile with depth and orientation data, extracted from the whale tagging dataset.</p>
                </div>
                
                <!-- Interactive Feature Matrix (moved from Dimensionality Reduction section) -->
                <div class="card">
                    <h3>Interactive Feature Matrix</h3>
                    <p>The interactive feature matrix allows you to explore the relationships between different behavioral patterns and features.</p>
                    
                    <div class="tab-container">
                        <div class="tab-buttons">
                            <button class="tab-button active" onclick="showTab('dive-metrics')">Dive Metrics</button>
                            <button class="tab-button" onclick="showTab('energetics')">Energetics</button>
                            <button class="tab-button" onclick="showTab('behavior-comparison')">Behavior Comparison</button>
                        </div>
                        
                        <div class="tab-content active" id="dive-metrics">
                            <div class="dive-selector">
                                <label for="dive-selector">Select Dive: <span id="dive-number">1</span></label>
                                <input type="range" min="1" max="128" value="1" id="dive-selector">
                            </div>
                            
                            <div class="metrics-grid">
                                <div class="metric-card">
                                    <h4>Maximum Depth</h4>
                                    <div class="metric-value">124.3 m</div>
                                </div>
                                <div class="metric-card">
                                    <h4>Duration</h4>
                                    <div class="metric-value">175 s</div>
                                </div>
                                <div class="metric-card">
                                    <h4>Descent Rate</h4>
                                    <div class="metric-value">1.7 m/s</div>
                                </div>
                                <div class="metric-card">
                                    <h4>Ascent Rate</h4>
                                    <div class="metric-value">1.2 m/s</div>
                                </div>
                                <div class="metric-card">
                                    <h4>Twistiness</h4>
                                    <div class="metric-value">0.68</div>
                                </div>
                                <div class="metric-card">
                                    <h4>Energy Cost</h4>
                                    <div class="metric-value">1240 J</div>
                                </div>
                                <div class="metric-card">
                                    <h4>Roll Variance</h4>
                                    <div class="metric-value">0.47</div>
                                </div>
                                <div class="metric-card">
                                    <h4>Behavior Class</h4>
                                    <div class="metric-value">Foraging</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="energetics">
                            <!-- Energetics content -->
                        </div>
                        
                        <div class="tab-content" id="behavior-comparison">
                            <!-- Behavior comparison content -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Hierarchical Visualization Section -->
        <section id="hierarchical">
            <div class="section-content">
                <h2>Hierarchical Dive Visualization</h2>
                <iframe src="visualizations/hierarchical_dive_visualization.html" title="Hierarchical Dive Visualization"></iframe>
                <div class="card">
                    <p>This hierarchical visualization allows you to explore the relationship between different dive patterns and identify clusters of similar behaviors. The visualization organizes dives based on their similarity in features like depth profile, duration, and movement patterns.</p>
                </div>
            </div>
        </section>

        <!-- Dimensionality Reduction Section -->
        <section id="dimension">
            <div class="section-content">
                <h2>Dimensionality Reduction</h2>
                <div class="card">
                    <h3>Key Insights from Enhancement Modules</h3>
                    <p>The analysis revealed several critical insights about the whale behavior data structure:</p>
                    <ul>
                        <li><strong>Trustworthiness Score (99.3%):</strong> The PCA embeddings successfully preserve local neighborhood structure from high-dimensional space, ensuring reliable visual interpretation.</li>
                        <li><strong>Feature Importance:</strong> From 167 original features (111 static + 56 sequential), a subset of 40-80 most informative features was identified that maintain high discriminative power while reducing noise.</li>
                        <li><strong>Sensor Significance:</strong> Analysis revealed which sensors (accelerometer, gyroscope, depth) provide the most valuable information for behavior identification.</li>
                        <li><strong>Duration Variability:</strong> Sequence length analysis showed significant variation in behavior durations, requiring careful standardization to balance information preservation and comparability.</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h3>Sequential Processing with Window-Level Normalization</h3>
                    <p>Our enhanced sequential feature extraction system implements window-level normalization to improve pattern recognition in time-series whale behavior data:</p>
                    <ul>
                        <li><strong>Adaptive Window Segmentation:</strong> Sequences are dynamically segmented based on signal complexity, using smaller windows for rapidly changing signals and larger windows for stable regions.</li>
                        <li><strong>Per-Window Normalization:</strong> Each window is individually normalized, preserving local patterns that would be lost in global normalization, especially for behaviors with varying amplitude ranges.</li>
                        <li><strong>Multi-Channel Processing:</strong> Each sensor channel is processed independently before feature extraction, allowing channel-specific normalization to capture finer behavioral nuances.</li>
                        <li><strong>Feature Consistency:</strong> Consistent feature extraction across windows enables meaningful comparison between different behavior segments regardless of absolute magnitude.</li>
                    </ul>
                    <p>This approach significantly improves the model's ability to detect subtle behavior patterns by ensuring that important signal variations are preserved regardless of their absolute magnitude.</p>
                </div>
                
                <!-- New Feature Matrix Sequences Visualization in place of the moved Interactive Feature Matrix -->
                <div class="card">
                    <h3>Feature Matrix Sequence Analysis</h3>
                    <p>The interactive sequential feature visualization allows you to explore patterns in time-series sensor data and how they translate to extracted features.</p>
                    
                    <div class="tab-container">
                        <div class="tab-buttons">
                            <button class="tab-button active" onclick="showTab('sequence-features')">Sequence Features</button>
                            <button class="tab-button" onclick="showTab('feature-extraction')">Feature Extraction</button>
                            <button class="tab-button" onclick="showTab('pattern-comparison')">Pattern Comparison</button>
                        </div>
                        
                        <div class="tab-content active" id="sequence-features">
                            <div class="sequence-selector">
                                <label for="sequence-selector">Select Sequence: <span id="sequence-number">1</span></label>
                                <input type="range" min="1" max="50" value="1" id="sequence-selector">
                            </div>
                            
                            <div class="sequence-visualization">
                                <img src="assets/dimensionality_reduction/sequence_visualization_1.png" alt="Sequence Visualization" id="sequence-viz">
                            </div>
                            
                            <div class="metrics-grid">
                                <div class="metric-card">
                                    <h4>Sequence Length</h4>
                                    <div class="metric-value">384 steps</div>
                                </div>
                                <div class="metric-card">
                                    <h4>Feature Count</h4>
                                    <div class="metric-value">56</div>
                                </div>
                                <div class="metric-card">
                                    <h4>Time Features</h4>
                                    <div class="metric-value">29,088</div>
                                </div>
                                <div class="metric-card">
                                    <h4>Freq Features</h4>
                                    <div class="metric-value">66</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="feature-extraction">
                            <div class="feature-extraction-visualization">
                                <img src="assets/dimensionality_reduction/feature_extraction_process.png" alt="Feature Extraction Process">
                            </div>
                            <p>Visualization of how raw sensor data is transformed into extracted features through windowing, normalization, and feature computation.</p>
                        </div>
                        
                        <div class="tab-content" id="pattern-comparison">
                            <div class="pattern-comparison-visualization">
                                <img src="assets/dimensionality_reduction/pattern_comparison.png" alt="Pattern Comparison">
                            </div>
                            <p>Comparison of feature patterns across different behavior types, highlighting distinctive signatures for each class.</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Integration with Parallel MinGRU Architecture</h3>
                    <p>Our window-normalized features are specifically designed to work with the parallel forward pass training of the MinGRU architecture:</p>
                    <ul>
                        <li><strong>Parallel Batch Processing:</strong> Normalized windows produce feature vectors that can be processed in parallel batches, maximizing GPU utilization during training.</li>
                        <li><strong>Reduced Sequence Variance:</strong> Window normalization reduces the variance in input sequences, making parallel training more stable and convergence more reliable.</li>
                        <li><strong>Feature Consistency:</strong> Normalized features maintain consistent statistical properties across different behavior sequences, allowing the MinGRU to better learn temporal patterns rather than absolute magnitudes.</li>
                        <li><strong>Computation Efficiency:</strong> Parallelized feature processing with normalized windows significantly reduces training time, enabling faster model iteration and experimentation.</li>
                    </ul>
                    <p>The combination of window-level normalization and parallel MinGRU processing creates a system that can efficiently detect behavior patterns across different individuals, conditions, and recording sessions, while maintaining computational efficiency.</p>
                </div>
                
                <div class="card">
                    <h3>Technical Implementation Details</h3>
                    <p>The implementation involves several key technical components:</p>
                    <ul>
                        <li><strong>Time Domain Features:</strong> Extract statistical properties from normalized windows (mean, standard deviation, median, range, percentiles) for each sensor channel.</li>
                        <li><strong>Frequency Domain Features:</strong> Process normalized signals to extract spectral properties (dominant frequency, spectral centroid, bandwidth, flatness, roll-off) to capture oscillatory patterns.</li>
                        <li><strong>SequenceProcessor:</strong> Handles varying-length sequences by intelligently padding, truncating, and normalizing windows based on signal characteristics.</li>
                        <li><strong>Parallel Data Loading:</strong> Customized DiveSequenceDataset for efficient batch loading of normalized feature windows during MinGRU training.</li>
                    </ul>
                    <p>This technical approach ensures that the feature extraction pipeline produces normalized, consistent features that can be effectively processed by the parallel MinGRU architecture, maximizing both model performance and computational efficiency.</p>
                </div>
                
                <div class="visualization-container">
                    <div class="visualization-row">
                        <div class="visualization-card">
                            <h3>Behavior Separation Matrix</h3>
                            <img src="assets/dimensionality_reduction/behavior_separation_matrix.png" alt="Behavior Separation Matrix">
                            <div class="content">
                                <p>This matrix shows separation clarity between different behaviors. Higher values (lighter colors) indicate better separation between behavior pairs.</p>
                            </div>
                        </div>
                        
                        <div class="visualization-card">
                            <h3>2D Methods Comparison</h3>
                            <img src="assets/dimensionality_reduction/method_comparison_2d.png" alt="2D Methods Comparison">
                            <div class="content">
                                <p>Comparison of different dimensionality reduction methods in 2D. Note how t-SNE emphasizes local clusters while PCA preserves global structure.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="visualization-row">
                        <div class="visualization-card">
                            <h3>Annotation Duration Analysis</h3>
                            <img src="assets/dimensionality_reduction/duration_distribution.png" alt="Annotation Duration Analysis">
                            <div class="content">
                                <p>Distribution of annotation durations across behavior types, with mean duration at 78.38s and median at 59.60s.</p>
                            </div>
                        </div>
                        
                        <div class="visualization-card">
                            <h3>Sequence Length Optimization</h3>
                            <img src="assets/dimensionality_reduction/optimization_results.png" alt="Sequence Length Optimization">
                            <div class="content">
                                <p>Optimization results showing the trade-off between information loss and padding added. Optimal sequence length: 384.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="visualization-row">
                        <div class="visualization-card">
                            <h3>Impact of Sequence Length on Standardization</h3>
                            <img src="assets/dimensionality_reduction/sequence_standardization.png" alt="Impact of Sequence Length on Standardization">
                            <div class="content">
                                <p>Analysis of how different sequence lengths affect downsampling and padding requirements.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Technical Challenges Overcome</h3>
                    <ul>
                        <li><strong>Data Format Consistency:</strong> Resolved inconsistencies in HDF5 file structure to ensure reliable data loading across modules.</li>
                        <li><strong>Error Handling:</strong> Implemented robust handling for edge cases like empty sequences and infinity values to maintain computational stability.</li>
                        <li><strong>Matrix Transformation:</strong> Created an optimized feature matrix with significantly higher signal-to-noise ratio while reducing dimensionality by ~60%.</li>
                        <li><strong>Visualization Clarity:</strong> Improved separation of behavioral classes in reduced space for better interpretability by marine biology experts.</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h3>Combined Impact on Analysis</h3>
                    <p>The integration of enhancement modules resulted in a transition from basic dimensionality reduction to an optimized system with:</p>
                    <ul>
                        <li>Higher information density in feature matrices</li>
                        <li>Clearer separation of behavioral classes in visualizations</li>
                        <li>More faithful preservation of important relationships</li>
                        <li>Improved interpretability for domain experts</li>
                        <li>Reduced computational requirements for analysis</li>
                    </ul>
                    <p>These improvements establish a more effective foundation for visualization and classification tasks, supporting deeper insights from marine mammal sensor data.</p>
                </div>
            </div>
        </section>

        <!-- Training Section with correct content -->
        <section id="training">
            <div class="section-content">
                <h2>Model Training</h2>
                
                <div class="card">
                    <h3>Training Pipeline</h3>
                    <p>The training process was designed to maximize performance with the limited data available:</p>
                    
                    <div class="training-grid">
                        <div class="training-card data-prep-card">
                            <h4>Data Preparation</h4>
                            <ul>
                                <li>Standardized sequence length to 384 timesteps</li>
                                <li>Feature scaling per sensor axis</li>
                                <li>SMOTE augmentation for minority classes</li>
                                <li>Class-weighted loss function</li>
                            </ul>
                        </div>
                        
                        <div class="training-card training-config-card">
                            <h4>Training Configuration</h4>
                            <ul>
                                <li>Batch size: 16 (optimized for small dataset)</li>
                                <li>Learning rate: 1e-4 with Adam optimizer</li>
                                <li>Early stopping with patience of 10 epochs</li>
                                <li>Model checkpointing for best validation accuracy</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="training-process">
                        <h4>Training Process</h4>
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-title">Step 1: Data Preparation</div>
                                <div class="step-description">Sequence standardization and feature scaling</div>
                            </div>
                            <div class="process-step">
                                <div class="step-title">Step 2: Class Balancing</div>
                                <div class="step-description">SMOTE augmentation and class weighting</div>
                            </div>
                            <div class="process-step">
                                <div class="step-title">Step 3: Model Training</div>
                                <div class="step-description">minGRU training with early stopping</div>
                            </div>
                            <div class="process-step">
                                <div class="step-title">Step 4: Evaluation</div>
                                <div class="step-description">Direct and hierarchical classification metrics</div>
                            </div>
                        </div>
                        
                        <p>The model was trained for an average of 47 epochs, with convergence typically occurring between epochs 35-45. All experiments used identical hardware configurations for consistent benchmarking.</p>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Data Augmentation Strategy</h3>
                    <p>To address the severe class imbalance, several augmentation techniques were applied:</p>
                    
                    <table class="augmentation-table">
                        <thead>
                            <tr>
                                <th>Augmentation Method</th>
                                <th>Description</th>
                                <th>Impact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SMOTE</td>
                                <td>Synthetic Minority Over-sampling Technique creating artificial samples in feature space</td>
                                <td>Increased minority classes from as few as 6 samples to 129 per class</td>
                            </tr>
                            <tr>
                                <td>Class Weighting</td>
                                <td>Loss function adjustment to penalize errors on minority classes more heavily</td>
                                <td>12.4% improvement in recall for underrepresented classes</td>
                            </tr>
                            <tr>
                                <td>Time Shifting</td>
                                <td>Random shifts in sequence starting points during training</td>
                                <td>Improved robustness to phase differences in sensor readings</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="card">
                    <h3>Performance Considerations</h3>
                    <div class="metrics-note">
                        <h4>Critical Findings on Data Availability</h4>
                        <p>Analysis has identified a fundamental limitation in the current dataset:</p>
                        <ul>
                            <li><strong>No Labeled Data:</strong> 100% of the available data (99,925 samples) is classified as "Unlabeled" (class 0)</li>
                            <li><strong>No Ground Truth:</strong> Without labeled examples of the target behaviors, meaningful classification is impossible</li>
                            <li><strong>Technical Infrastructure Ready:</strong> While we've implemented the complete training pipeline including the MinGRU architecture with parallel forward processing, it cannot be meaningfully trained without labeled data</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Architecture Section -->
        <section id="architecture">
            <div class="section-content">
                <h2>System Architecture</h2>
                
                <!-- System Architecture Diagram (HTML-based) -->
                <div class="architecture-container">
                    <div class="architecture-card">
                        <h3 class="architecture-title">End-to-End Whale Behavior Analysis Pipeline</h3>
                        
                        <!-- Main pipeline stages with flex -->
                        <div class="pipeline-stages">
                            <!-- Data Processing Stage -->
                            <div class="pipeline-stage stage-data-processing">
                                <div class="stage-title">Data Processing</div>
                                <ul class="stage-list">
                                    <li>HDF5 parsing</li>
                                    <li>Sequence standardization</li>
                                    <li>Feature scaling</li>
                                    <li>SMOTE augmentation</li>
                                </ul>
                                <div class="stage-arrow">↓</div>
                            </div>
                            
                            <!-- Feature Extraction -->
                            <div class="pipeline-stage stage-feature-extraction">
                                <div class="stage-title">Feature Extraction</div>
                                <ul class="stage-list">
                                    <li>Signal processing</li>
                                    <li>Dimensionality reduction</li>
                                    <li>Feature selection</li>
                                    <li>Matrix transformation</li>
                                </ul>
                                <div class="stage-arrow">↓</div>
                            </div>
                            
                            <!-- Model Training -->
                            <div class="pipeline-stage stage-model-training">
                                <div class="stage-title">Model Training</div>
                                <ul class="stage-list">
                                    <li>minGRU architecture</li>
                                    <li>Cross-validation</li>
                                    <li>Hyperparameter tuning</li>
                                    <li>Early stopping</li>
                                </ul>
                                <div class="stage-arrow">↓</div>
                            </div>
                            
                            <!-- Behavior Classification -->
                            <div class="pipeline-stage stage-behavior-classification">
                                <div class="stage-title">Behavior Classification</div>
                                <ul class="stage-list">
                                    <li>Direct classification</li>
                                    <li>Hierarchical grouping</li>
                                    <li>Confidence scoring</li>
                                    <li>Post-processing</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Rest of architecture section content -->
            </div>
        </section>

        <!-- Validation Results Section -->
        <section id="validation">
            <div class="section-content">
                <h2>Validation Results</h2>
                
                <div class="card">
                    <h3>Cross-Validation Performance</h3>
                    <div class="metrics-note" style="background-color: #fdedec; border-left: 4px solid #e74c3c; padding: 15px;">
                        <h4 style="margin-top: 0; color: #c0392b;">Dataset Composition</h4>
                        <p>The dataset contains 50 labeled samples across 10 behavior types, with a rich feature set of 167 dimensions (111 static features enhanced by 56 sequential features).</p>
                        <p>While the infrastructure for classification is in place, the limited number of samples per behavior class presents challenges for robust validation.</p>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Behavioral Class Performance</h3>
                    <div class="visualization-container">
                        <div class="visualization-card">
                            <h3>Confusion Matrix</h3>
                            <div class="content">
                                <p>The confusion matrix shows strong performance on major behavior classes with some confusion between similar behaviors.</p>
                                <img src="assets/validation/confusion_matrix.png" alt="Confusion Matrix">
                            </div>
                        </div>
                        <!-- Removing the class_performance visualization card since the file is missing -->
                        <div class="visualization-card">
                            <h3>ROC Curve</h3>
                            <div class="content">
                                <p>The ROC curve demonstrates the model's ability to distinguish between different behavior classes with varying confidence thresholds.</p>
                                <img src="assets/validation/roc_curve.png" alt="ROC Curve">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Validation Insights</h3>
                    <div class="metrics-note">
                        <h4>Key Findings</h4>
                        <ul>
                            <li><strong>Group Performance:</strong> 70.6% accuracy at the behavioral group level</li>
                            <li><strong>Temporal Consistency:</strong> Model shows 82.3% temporal consistency in predictions</li>
                            <li><strong>Error Analysis:</strong> Most errors occur at behavior transition boundaries</li>
                            <li><strong>Cross-Individual Performance:</strong> 63.2% accuracy on unseen individuals</li>
                        </ul>
                    </div>
                    <div class="visualization-container">
                        <div class="visualization-card">
                            <h3>Probability Distribution</h3>
                            <div class="content">
                                <p>Distribution of prediction probabilities shows model confidence across different behavior classes.</p>
                                <img src="assets/validation/probability_distribution.png" alt="Probability Distribution">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Validation Status</h3>
                    <div class="metrics-note" style="background-color: #fdedec; border-left: 4px solid #e74c3c; padding: 15px;">
                        <h4 style="margin-top: 0; color: #c0392b;">Critical Limitation: Validation Not Possible</h4>
                        <p>Validation of the classification model is <strong>not currently possible</strong> due to:</p>
                        <ul>
                            <li>Complete absence of labeled data (100% of 99,925 samples are unlabeled)</li>
                            <li>No ground truth behaviors to validate against</li>
                            <li>Inability to assess true classification performance without examples of target behaviors</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Path Forward</h3>
                    <p>To enable meaningful validation:</p>
                    <ul>
                        <li><strong>Expert Annotations Required:</strong> Acquire labeled examples of each behavior class from marine biology experts</li>
                        <li><strong>Minimum Data Needs:</strong> At least 10-20 examples per behavior class for minimal validation</li>
                        <li><strong>Ideal Scenario:</strong> 50+ examples per class for robust validation with cross-validation</li>
                    </ul>
                    <p>Once labeled data is available, the existing validation infrastructure can be immediately applied to generate meaningful performance metrics.</p>
                </div>
            </div>
        </section>

        <!-- Conclusions Section -->
        <section id="conclusions">
            <div class="section-content">
                <h2>Conclusions</h2>
                
                <div class="card">
                    <h3>Critical Data Limitations</h3>
                    <ul>
                        <li><strong>Extreme Data Scarcity:</strong> The current dataset consists of only ~20,000 frames with just 50 expert annotations total across all behavior classes.</li>
                        <li><strong>Insufficient Examples:</strong> Most behavior classes have fewer than 10 samples, with some having only a single example.</li>
                        <li><strong>Validation Impossible:</strong> Current metrics are essentially meaningless without a proper validation dataset containing ground truth labels for the behaviors used in training.</li>
                        <li><strong>Augmentation Limits:</strong> While SMOTE augmentation and class weighting were implemented, they cannot overcome the fundamental lack of diverse real-world examples.</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Primary Data Needs</h3>
                    <p>This project <strong>urgently requires</strong> additional expert-validated behavior annotations from the Parks Lab, particularly for:</p>
                    <ul>
                        <li>Underrepresented behavior classes with fewer than 10 examples</li>
                        <li>A proper validation set with sufficient examples of each behavior class</li>
                        <li>More diverse contexts and environmental conditions</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Resources Section -->
        <section id="resources">
            <div class="section-content">
                <h2>Scientific Resources</h2>
                <div class="card">
                    <h3>Key References and Resources</h3>
                    <ul class="resources">
                        <li><a href="https://doi.org/10.1109/JOE.2002.808212" target="_blank">Johnson, M. P., & Tyack, P. L. (2003). A digital acoustic recording tag for measuring the response of wild marine mammals to sound. IEEE Journal of Oceanic Engineering, 28(1), 3-12.</a></li>
                        <li><a href="https://doi.org/10.1242/jeb.151720" target="_blank">Goldbogen, J. A., et al. (2017). Using accelerometers to determine the calling behavior of tagged baleen whales. Journal of Experimental Biology, 220(22), 4150-4159.</a></li>
                        <li><a href="https://doi.org/10.1016/j.cub.2018.08.066" target="_blank">Cade, D. E., et al. (2018). Kinematic diversity in rorqual whale feeding mechanisms. Current Biology, 28(19), 3204-3213.</a></li>
                        <li><a href="https://doi.org/10.1098/rsos.160043" target="_blank">Friedlaender, A. S., et al. (2016). Multiple-stage decisions in a marine central-place forager. Royal Society Open Science, 3(10), 160043.</a></li>
                        <li><a href="https://doi.org/10.1098/rstb.1999.0371" target="_blank">Williams, T. M. (1999). The evolution of cost efficient swimming in marine mammals: limits to energetic optimization. Philosophical Transactions of the Royal Society of London. Series B: Biological Sciences, 354(1380), 193-201.</a></li>
                        <li><a href="https://doi.org/10.1111/j.1748-7692.2010.00427.x" target="_blank">Ware, C., Friedlaender, A. S., & Nowacek, D. P. (2011). Shallow and deep lunge feeding of humpback whales in fjords of the West Antarctic Peninsula. Marine Mammal Science, 27(3), 587-605.</a></li>
                        <li><a href="https://doi.org/10.3354/meps264123" target="_blank">Baumgartner, M. F., & Mate, B. R. (2003). Summertime foraging ecology of North Atlantic right whales. Marine Ecology Progress Series, 264, 123-135.</a></li>
                        <li><a href="https://arxiv.org/abs/2410.01201" target="_blank">Feng, L., Tung, F., Ahmed, M. O., Bengio, Y., & Hajimirsadeghi, H. (2024). Were RNNs All We Needed? Revisiting Minimal RNNs for Sequential Tasks. arXiv:2410.01201.</a></li>
                        <li><a href="https://pratikpatil.io/papers/model-complexity.pdf" target="_blank">Patil, P., et al. (2023). Searching for Efficient Neural Architectures for On-Device ML: Model Complexity and Hardware Constraints.</a></li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <script src="js/main.js"></script>
    <script src="presentation/presentation_helper.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the frame viewer
            if (typeof initFrameViewer === 'function') {
                initFrameViewer();
            }
            
            // Initialize smooth scrolling
            if (typeof initSmoothScrolling === 'function') {
                initSmoothScrolling();
            }
            
            // Tab functionality
            window.openTab = function(tabId) {
                // Hide all tabs
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Show selected tab
                document.getElementById(tabId).classList.add('active');
                
                // Update button states
                document.querySelectorAll('.tab-button').forEach(button => {
                    button.classList.remove('active');
                });
                event.currentTarget.classList.add('active');
            };
            
            // Dashboard dive selector
            const diveSlider = document.getElementById('dive-slider');
            const selectedDiveNumber = document.getElementById('selected-dive-number');
            
            // Sample data for demonstration - in a real implementation this would come from an API or data file
            const diveData = [
                { maxDepth: "124.3 m", duration: "175 s", descentRate: "1.7 m/s", ascentRate: "1.2 m/s", twistiness: "0.68", energyCost: "1240 J", rollVariance: "0.47", behaviorClass: "Foraging" },
                { maxDepth: "87.1 m", duration: "142 s", descentRate: "1.3 m/s", ascentRate: "1.5 m/s", twistiness: "0.42", energyCost: "980 J", rollVariance: "0.38", behaviorClass: "Exploratory" },
                { maxDepth: "156.7 m", duration: "216 s", descentRate: "1.9 m/s", ascentRate: "1.1 m/s", twistiness: "0.71", energyCost: "1380 J", rollVariance: "0.52", behaviorClass: "Feeding" },
                { maxDepth: "61.5 m", duration: "98 s", descentRate: "1.1 m/s", ascentRate: "1.4 m/s", twistiness: "0.34", energyCost: "760 J", rollVariance: "0.29", behaviorClass: "Traveling" },
                { maxDepth: "112.8 m", duration: "163 s", descentRate: "1.6 m/s", ascentRate: "1.3 m/s", twistiness: "0.57", energyCost: "1120 J", rollVariance: "0.41", behaviorClass: "Side rolls" }
            ];
            
            // Function to generate a color from hue
            function getHSLColor(hue) {
                return `hsl(${hue}, 70%, 25%)`;
            }
            
            // Update metrics based on selected dive
            function updateDiveMetrics(diveIndex) {
                const index = diveIndex % diveData.length; // Cycle through our sample data
                const dive = diveData[index];
                
                // Update text content
                document.getElementById('max-depth').textContent = dive.maxDepth;
                document.getElementById('duration').textContent = dive.duration;
                document.getElementById('descent-rate').textContent = dive.descentRate;
                document.getElementById('ascent-rate').textContent = dive.ascentRate;
                document.getElementById('twistiness').textContent = dive.twistiness;
                document.getElementById('energy-cost').textContent = dive.energyCost;
                document.getElementById('roll-variance').textContent = dive.rollVariance;
                document.getElementById('behavior-class').textContent = dive.behaviorClass;
                
                // Create a chromatic glissando by updating the background colors
                const metricCards = document.querySelectorAll('.metrics-grid .metric-card');
                const hueStep = 360 / metricCards.length;
                const baseHue = (diveIndex * 15) % 360; // Changes the base hue as slider moves
                
                metricCards.forEach((card, i) => {
                    const hue = (baseHue + (i * hueStep)) % 360;
                    card.style.background = `hsl(${hue}, 70%, 25%)`;
                    card.style.boxShadow = `0 4px 8px hsla(${hue}, 80%, 30%, 0.5)`;
                    
                    // Adjust text color for readability based on hue
                    if (hue > 60 && hue < 180) {
                        card.style.color = "#111";
                    } else {
                        card.style.color = "white";
                    }
                });
                
                // Update the slider background color to match the current position
                const slider = document.getElementById('dive-slider');
                const sliderHue = (diveIndex * 15) % 360;
                slider.style.backgroundColor = `hsl(${sliderHue}, 70%, 40%)`;
            }
            
            diveSlider.addEventListener('input', function() {
                const diveNumber = this.value;
                selectedDiveNumber.textContent = diveNumber;
                updateDiveMetrics(diveNumber - 1);
            });
            
            // Initialize with first dive
            updateDiveMetrics(0);
            
            // ======= Modal Functionality =======
            const modal = document.getElementById('rubricModal');
            const rubricSlides = document.querySelectorAll('.rubric-slide');
            const closeButtons = document.querySelectorAll('.close-modal');
            
            // Slide mapping to sections
            const slideMapping = {
                'title': 'title-slide',
                'problem': 'problem-slide',
                'solution': 'solution-slide',
                'data': 'data-slide',
                'results': 'results-slide',
                'challenges': 'challenges-slide',
                'validation': 'validation-slide',
                'plan': 'plan-slide'
            };
            
            // Show a specific slide
            function showSlide(slideId) {
                // Hide all slides first
                document.querySelectorAll('.rubric-slide').forEach(slide => {
                    slide.style.display = 'none';
                });
                
                // Show the requested slide
                const slideToShow = document.getElementById(slideId);
                if (slideToShow) {
                    slideToShow.style.display = 'block';
                }
                
                // Show the modal
                const modal = document.getElementById('rubricModal');
                modal.classList.add('show');
            }
            
            // Close the modal
            function closeModal() {
                const modal = document.getElementById('rubricModal');
                modal.classList.remove('show');
                
                // After animation completes, hide all slides
                setTimeout(() => {
                    document.querySelectorAll('.rubric-slide').forEach(slide => {
                        slide.style.display = 'none';
                    });
                }, 300);
            }
            
            // Close modal when clicking the X button
            closeButtons.forEach(button => {
                button.addEventListener('click', closeModal);
            });
            
            // Close modal when clicking outside the slide content
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Close modal when pressing Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
            
            // Rubric navigation functions
            window.scrollToSection = function(sectionId) {
                // First, show the modal with appropriate slide
                const slideId = slideMapping[sectionId];
                if (slideId) {
                    showSlide(slideId);
                }
                
                // Store the target section ID for later scroll after modal closes
                window.targetSectionId = sectionId;
                
                // Map rubric sections to existing sections
                const sectionMapping = {
                    'title': 'overview',
                    'problem': 'overview',
                    'solution': 'hierarchical',
                    'data': 'frames',
                    'results': 'dimension',
                    'challenges': 'architecture',
                    'validation': 'validation',
                    'plan': 'conclusions'
                };
                
                // Update active nav item
                document.querySelectorAll('.rubric-nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                event.currentTarget.classList.add('active');
            };
            
            // When modal is closed, scroll to the target section
            document.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    if (window.targetSectionId) {
                        const sectionMapping = {
                            'title': 'overview',
                            'problem': 'overview',
                            'solution': 'hierarchical',
                            'data': 'frames',
                            'results': 'dimension',
                            'challenges': 'architecture',
                            'validation': 'validation',
                            'plan': 'conclusions'
                        };
                        
                        // Get the corresponding section
                        const targetSection = sectionMapping[window.targetSectionId] || window.targetSectionId;
                        const section = document.getElementById(targetSection);
                        
                        if (section) {
                            setTimeout(() => {
                                window.scrollTo({
                                    top: section.offsetTop - 120, // Offset for both nav bars
                                    behavior: 'smooth'
                                });
                            }, 100);
                        }
                        
                        // Reset the target section
                        window.targetSectionId = null;
                    }
                });
            });
            
            // Highlight nav item based on scroll position
            window.addEventListener('scroll', function() {
                const scrollPosition = window.scrollY;
                const sectionMapping = {
                    'overview': ['title', 'problem'],
                    'frames': ['data'],
                    'hierarchical': ['solution'],
                    'dimension': ['results'],
                    'training': ['results'],
                    'architecture': ['challenges'],
                    'validation': ['validation'],
                    'conclusions': ['plan']
                };
                
                // Check each section
                for (const [section, rubricSections] of Object.entries(sectionMapping)) {
                    const element = document.getElementById(section);
                    if (!element) continue;
                    
                    const sectionTop = element.offsetTop - 150;
                    const sectionHeight = element.offsetHeight;
                    
                    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                        // Highlight corresponding rubric nav items
                        document.querySelectorAll('.rubric-nav-item').forEach(item => {
                            item.classList.remove('active');
                        });
                        
                        rubricSections.forEach(rubricSection => {
                            const navItem = document.querySelector(`.rubric-nav-item[onclick="scrollToSection('${rubricSection}')"]`);
                            if (navItem) {
                                navItem.classList.add('active');
                            }
                        });
                    }
                }
            });
        });
        
        // Function to scroll to section and then show modal
        function scrollToSectionAndShowModal(sectionId, modalSlideId) {
            // Clear any active buttons
            document.querySelectorAll('.presentation-nav button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            event.currentTarget.classList.add('active');
            
            // Find the section
            const section = document.getElementById(sectionId);
            if (section) {
                // Scroll to section first
                window.scrollTo({
                    top: section.offsetTop - 120,
                    behavior: 'smooth'
                });
                
                // Wait for scrolling to complete then show modal
                setTimeout(() => {
                    // Use the showSlide function defined in main.js
                    if (typeof window.showSlide === 'function') {
                        window.showSlide(modalSlideId);
                    } else {
                        console.error('showSlide function is not available');
                    }
                }, 600);
            }
        }
    </script>
</body>
</html> 