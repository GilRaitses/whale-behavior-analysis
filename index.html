<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whale Behavior Analysis</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .visualization-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .visualization-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .visualization-card {
            flex: 1;
            min-width: 300px;
            max-width: 600px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .visualization-card img {
            width: 100%;
            height: auto;
        }
        
        .visualization-card h3 {
            padding: 10px 15px;
            margin: 0;
            background: #f5f5f5;
            border-bottom: 1px solid #ddd;
        }
        
        .visualization-card .content {
            padding: 15px;
        }
        
        .metrics-dashboard {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .dive-selector {
            margin-bottom: 20px;
        }
        
        .dive-selector input {
            width: 100%;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .metric-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            text-align: center;
        }
        
        .metric-card h4 {
            margin-top: 0;
            color: #666;
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
        }
        
        .tab-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .tab-buttons {
            display: flex;
            background: #f5f5f5;
        }
        
        .tab-button {
            padding: 10px 20px;
            border: none;
            background: none;
            cursor: pointer;
            flex: 1;
            font-weight: bold;
        }
        
        .tab-button.active {
            background: #3498db;
            color: white;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Rubric Navigation */
        .rubric-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #2c3e50;
            color: white;
            padding: 10px 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .rubric-nav-container {
            display: flex;
            justify-content: space-around;
            max-width: 1200px;
            margin: 0 auto;
            flex-wrap: wrap;
        }
        
        .rubric-nav-item {
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s;
            margin: 5px;
            font-weight: bold;
            text-align: center;
        }
        
        .rubric-nav-item:hover {
            background-color: #3498db;
        }
        
        .rubric-nav-item.active {
            background-color: #3498db;
        }
        
        /* Adjust regular navbar for coexistence with rubric nav */
        .navbar {
            margin-top: 60px; /* Make room for rubric nav */
        }
        
        #content-container {
            margin-top: 60px; /* Adjust for rubric nav */
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .rubric-nav-container {
                flex-direction: column;
            }
            
            .rubric-nav-item {
                width: 100%;
                box-sizing: border-box;
            }
            
            .navbar {
                margin-top: 240px; /* Adjust for taller rubric nav on mobile */
            }
            
            #content-container {
                margin-top: 240px; /* Adjust for taller rubric nav on mobile */
            }
        }
        
        /* Modal styles for rubric slides */
        .rubric-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            overflow: auto;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .rubric-modal.show {
            display: block;
            opacity: 1;
        }
        
        .rubric-slide {
            position: relative;
            width: 90%;
            max-width: 1000px;
            background-color: #fff;
            margin: 50px auto;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .close-modal:hover {
            color: #555;
        }
        
        .rubric-slide h2 {
            color: #2c3e50;
            margin-top: 0;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .slide-section {
            margin-bottom: 20px;
        }
        
        .slide-section h3 {
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .data-point {
            background-color: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 10px 15px;
            margin-bottom: 15px;
            border-radius: 0 4px 4px 0;
        }
        
        .highlight-box {
            background-color: #eaf2f8;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .metric-point {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .feature-tag {
            display: inline-block;
            background-color: #e8f4f8;
            color: #2980b9;
            padding: 5px 10px;
            border-radius: 4px;
            margin-right: 8px;
            margin-bottom: 8px;
            font-size: 14px;
            border: 1px solid #aed6f1;
        }
    </style>
</head>
<body>
    <!-- Rubric Slides Modal -->
    <div id="rubricModal" class="rubric-modal">
        <!-- Title Slide -->
        <div id="title-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Whale Behavior Analysis</h2>
            <div class="slide-section">
                <h3>Project Overview</h3>
                <p>An end-to-end pipeline for automated classification and visualization of whale behaviors from sensor data.</p>
                
                <div class="highlight-box">
                    <p><strong>Key Contributions:</strong></p>
                    <ul>
                        <li>Hierarchical visualization system for exploring dive patterns</li>
                        <li>Custom minGRU architecture optimized for limited datasets</li>
                        <li>Feature extraction methodology from high-dimensional sensor data</li>
                        <li>Dashboard for marine biologists to explore behaviors and metrics</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Problem & Stakeholder Slide -->
        <div id="problem-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Problem & Stakeholder</h2>
            
            <div class="slide-section">
                <h3>Domain Problem</h3>
                <p>Understanding marine mammal behavior patterns is crucial for conservation efforts and ecological research. Traditional methods of behavior classification rely on expert annotations, which are time-consuming and limited in scale.</p>
            </div>
            
            <div class="slide-section">
                <h3>Primary Stakeholder</h3>
                <div class="data-point">
                    <p>The Parks Lab at Stanford University's Hopkins Marine Station collects extensive whale sensor data but struggles with efficient behavior classification and analysis at scale.</p>
                </div>
            </div>
            
            <div class="slide-section">
                <h3>Stakeholder Needs</h3>
                <ul>
                    <li>Automated classification of whale behaviors from sensor data</li>
                    <li>Tools to visualize dive patterns and associated behaviors</li>
                    <li>Methods to identify previously unknown behavior patterns</li>
                    <li>Insights into energetic costs of different behaviors</li>
                </ul>
            </div>
        </div>
        
        <!-- Solution Slide -->
        <div id="solution-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Envisioned Solution</h2>
            
            <div class="slide-section">
                <h3>Solution Overview</h3>
                <p>A comprehensive behavior analysis pipeline that combines machine learning classification with interactive visualization tools to transform raw sensor data into actionable insights for marine biologists.</p>
            </div>
            
            <div class="slide-section">
                <h3>Key Components</h3>
                <ul>
                    <li><strong>Hierarchical Classification Model:</strong> Using minGRU architecture to classify whale behaviors from sensor data</li>
                    <li><strong>Interactive Visualizations:</strong> Tools for exploring dive patterns and associated behaviors</li>
                    <li><strong>Dimensionality Reduction:</strong> Techniques to identify patterns and clusters in high-dimensional sensor data</li>
                    <li><strong>Energetics Analysis:</strong> Models to estimate energy expenditure associated with different behaviors</li>
                </ul>
            </div>
            
            <div class="slide-section">
                <h3>Connection to Stakeholder Needs</h3>
                <p>This solution enables the Parks Lab to efficiently process large volumes of sensor data, automatically classify behaviors, visualize patterns, and gain insights that would be impossible with manual annotation alone.</p>
            </div>
        </div>
        
        <!-- Data Slide -->
        <div id="data-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Data</h2>
            
            <div class="slide-section">
                <h3>Dataset Overview</h3>
                <ul>
                    <li><strong>Source:</strong> Stanford University's Hopkins Marine Station Parks Lab</li>
                    <li><strong>Format:</strong> HDF5 files containing sensor readings from whale tags</li>
                    <li><strong>Scope:</strong> ~20,000 frames with approximately 50 expert annotations</li>
                    <li><strong>Features:</strong> Accelerometer (3 axes), gyroscope (3 axes), depth, and other environmental sensors</li>
                    <li><strong>Behaviors:</strong> 9 distinct behavior classes (Feeding_loop, Kick_feeding, Noodle_feeding, etc.)</li>
                </ul>
            </div>
            
            <div class="slide-section">
                <h3>Data Limitations</h3>
                <div class="highlight-box" style="background-color: #fdedec; border-left: 4px solid #e74c3c;">
                    <p><strong>Critical Limitations:</strong></p>
                    <ul>
                        <li>Severe class imbalance (6 vs 216 samples for different behaviors)</li>
                        <li>Limited annotation volume (only ~50 total expert-validated behaviors)</li>
                        <li>Most behavior classes have fewer than 10 samples</li>
                        <li>Some behaviors have only a single example</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Results Slide -->
        <div id="results-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Initial Results</h2>
            
            <div class="slide-section">
                <h3>Dimensionality Reduction Insights</h3>
                <div class="data-point">
                    <p><strong>Trustworthiness Score:</strong> 99.3% - The PCA embeddings successfully preserve local neighborhood structure from high-dimensional space.</p>
                </div>
                <div class="data-point">
                    <p><strong>Feature Matrix Optimization:</strong> From 167 original features (111 static + 56 sequential), a subset of 40-80 most informative features was identified, reducing noise while maintaining discriminative power.</p>
                </div>
                <div class="data-point">
                    <p><strong>Sequence Length Analysis:</strong> Optimal sequence length determined to be 384 timesteps, balancing information preservation and standardization requirements.</p>
                </div>
                
                <div class="highlight-box">
                    <p><strong>Most Informative Features:</strong></p>
                    <div>
                        <span class="feature-tag">Depth variance</span>
                        <span class="feature-tag">Roll angle std</span>
                        <span class="feature-tag">Y-acceleration peaks</span>
                        <span class="feature-tag">Pitch stability</span>
                        <span class="feature-tag">Depth profile</span>
                        <span class="feature-tag">Heading changes</span>
                        <span class="feature-tag">Z-acceleration FFT</span>
                        <span class="feature-tag">Twist coefficient</span>
                    </div>
                </div>
            </div>
            
            <div class="slide-section">
                <h3>Classification Performance</h3>
                <div style="display: flex; flex-wrap: wrap; gap: 15px; margin-top: 10px;">
                    <div class="metric-point">Validation Accuracy: 57.2%</div>
                    <div class="metric-point">Hierarchical Accuracy: 63.1%</div>
                    <div class="metric-point">Training Accuracy: 72.3%</div>
                </div>
                <p style="margin-top: 15px; color: #e74c3c;"><strong>Note:</strong> These metrics must be considered preliminary due to extreme data limitations.</p>
            </div>
        </div>
        
        <!-- Challenges Slide -->
        <div id="challenges-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Challenges</h2>
            
            <div class="slide-section">
                <h3>Data Challenges</h3>
                <ul>
                    <li>Extreme data scarcity (only ~50 total expert annotations)</li>
                    <li>Severe class imbalance (some behaviors have only 1 sample)</li>
                    <li>Insufficient examples for proper validation</li>
                    <li>High dimensionality of sensor data (3 axes × 384 timesteps)</li>
                </ul>
                
                <div class="data-point">
                    <p><strong>Approach:</strong> SMOTE augmentation, class weights, and dimensional reduction techniques have been applied to mitigate these challenges, but they cannot overcome the fundamental lack of ground truth data.</p>
                </div>
            </div>
            
            <div class="slide-section">
                <h3>Model Challenges</h3>
                <ul>
                    <li>Training instability with small batch sizes</li>
                    <li>Overfitting indicators in validation performance</li>
                    <li>Limited generalization to unseen whales</li>
                    <li>Difficulty distinguishing similar behaviors</li>
                </ul>
                
                <div class="data-point">
                    <p><strong>Approach:</strong> Implemented the minGRU architecture with fewer parameters (39,690 vs ~120K) and a hierarchical classification approach. Also employed cross-validation with leave-one-out by whale ID.</p>
                </div>
            </div>
        </div>
        
        <!-- Plan Slide -->
        <div id="plan-slide" class="rubric-slide">
            <span class="close-modal">&times;</span>
            <h2>Plan & Goals</h2>
            
            <div class="slide-section">
                <h3>Critical Next Steps</h3>
                <ol>
                    <li><strong>Data Acquisition:</strong> Work with Parks Lab to acquire additional expert-validated behavior annotations</li>
                    <li><strong>Model Refinement:</strong> Fine-tune minGRU architecture once sufficient data is available</li>
                    <li><strong>Validation Methodology:</strong> Establish proper cross-validation with adequate samples per class</li>
                    <li><strong>Transfer Learning:</strong> Explore approaches to maximize utility of limited data</li>
                </ol>
            </div>
            
            <div class="slide-section">
                <h3>Final Deliverable</h3>
                <p>The final deliverable will include:</p>
                <ul>
                    <li>A fully functional behavior classification pipeline</li>
                    <li>Interactive dashboard for visualizing dive patterns and behaviors</li>
                    <li>Documentation for Parks Lab researchers to use and extend the system</li>
                    <li>Analysis of model performance and limitations</li>
                    <li>Recommendations for future data collection to improve classification</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Rubric Navigation -->
    <nav class="rubric-nav">
        <div class="rubric-nav-container">
            <div class="rubric-nav-item" onclick="scrollToSection('title')">Title</div>
            <div class="rubric-nav-item" onclick="scrollToSection('problem')">Problem & Stakeholder</div>
            <div class="rubric-nav-item" onclick="scrollToSection('solution')">Envisioned Solution</div>
            <div class="rubric-nav-item" onclick="scrollToSection('data')">Data</div>
            <div class="rubric-nav-item" onclick="scrollToSection('results')">Initial Results</div>
            <div class="rubric-nav-item" onclick="scrollToSection('challenges')">Challenges</div>
            <div class="rubric-nav-item" onclick="scrollToSection('plan')">Plan & Goals</div>
        </div>
    </nav>
    
    <nav class="navbar">
        <a href="#overview">Overview</a>
        <a href="#frames">Dive Frames</a>
        <a href="#hierarchical">Hierarchical Visualization</a>
        <a href="#dashboard">Dashboard</a>
        <a href="#dimension">Dimensionality Reduction</a>
        <a href="#training">Training</a>
        <a href="#architecture">Architecture</a>
        <a href="#conclusions">Conclusions</a>
        <a href="#resources">Resources</a>
    </nav>

    <div id="content-container">
        <!-- Overview Section -->
        <section id="overview">
            <div class="section-content">
                <h1>Whale Behavior Analysis</h1>
                <h2>Overview of 128 Detected Dives</h2>
                <img src="assets/dive_overview.png" alt="Overview of 128 Detected Dives" class="overview-img">
                <div class="card">
                    <p>This visualization provides an overview of 128 detected dive patterns, showcasing depth variations and relative twistiness across multiple dives. The color intensity represents the relative twistiness of the whale's movement during each dive segment.</p>
                </div>
            </div>
        </section>

        <!-- Dive Frames Section -->
        <section id="frames">
            <div class="section-content">
                <h2>Dive Frame Analysis</h2>
                <div class="frames-container">
                    <div class="frame-viewer">
                        <img id="current-frame" src="assets/dive_frames/dive_001.png" alt="Dive Frame" class="frame-img">
                        <div class="frame-counter">Frame: <span id="frame-number">1</span> of 128</div>
                    </div>
                    <div class="frame-controls">
                        <button id="prev-frame">Previous</button>
                        <button id="next-frame">Next</button>
                        <button id="play-frames">Play</button>
                    </div>
                    <input type="range" min="1" max="128" value="1" class="frame-selector" id="frame-slider">
                </div>
                <div class="card">
                    <p>Scroll through individual dive frames to analyze specific patterns and behaviors. Each frame represents a unique dive profile with depth and orientation data, extracted from the whale tagging dataset.</p>
                </div>
            </div>
        </section>

        <!-- Hierarchical Visualization Section -->
        <section id="hierarchical">
            <div class="section-content">
                <h2>Hierarchical Dive Visualization</h2>
                <iframe src="visualizations/hierarchical_dive_visualization.html" title="Hierarchical Dive Visualization"></iframe>
                <div class="card">
                    <p>This hierarchical visualization allows you to explore the relationship between different dive patterns and identify clusters of similar behaviors. The visualization organizes dives based on their similarity in features like depth profile, duration, and movement patterns.</p>
                </div>
            </div>
        </section>

        <!-- Interactive Dashboard Section -->
        <section id="dashboard">
            <div class="section-content">
                <h2>Interactive Whale Behavior Dashboard</h2>
                
                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="tab-button active" onclick="openTab('metrics-tab')">Dive Metrics</button>
                        <button class="tab-button" onclick="openTab('energetics-tab')">Energetics</button>
                        <button class="tab-button" onclick="openTab('comparison-tab')">Behavior Comparison</button>
                    </div>
                    
                    <div id="metrics-tab" class="tab-content active">
                        <div class="dive-selector">
                            <label for="dive-slider">Select Dive: <span id="selected-dive-number">1</span></label>
                            <input type="range" id="dive-slider" min="1" max="128" value="1">
                        </div>
                        
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <h4>Maximum Depth</h4>
                                <div class="metric-value" id="max-depth">124.3 m</div>
                            </div>
                            <div class="metric-card">
                                <h4>Duration</h4>
                                <div class="metric-value" id="duration">175 s</div>
                            </div>
                            <div class="metric-card">
                                <h4>Descent Rate</h4>
                                <div class="metric-value" id="descent-rate">1.7 m/s</div>
                            </div>
                            <div class="metric-card">
                                <h4>Ascent Rate</h4>
                                <div class="metric-value" id="ascent-rate">1.2 m/s</div>
                            </div>
                            <div class="metric-card">
                                <h4>Twistiness</h4>
                                <div class="metric-value" id="twistiness">0.68</div>
                            </div>
                            <div class="metric-card">
                                <h4>Energy Cost</h4>
                                <div class="metric-value" id="energy-cost">1240 J</div>
                            </div>
                            <div class="metric-card">
                                <h4>Roll Variance</h4>
                                <div class="metric-value" id="roll-variance">0.47</div>
                            </div>
                            <div class="metric-card">
                                <h4>Behavior Class</h4>
                                <div class="metric-value" id="behavior-class">Foraging</div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="energetics-tab" class="tab-content">
                        <div class="visualization-container">
                            <div class="visualization-card">
                                <h3>Energy Expenditure by Dive Phase</h3>
                                <div class="content">
                                    <canvas id="energy-chart"></canvas>
                                </div>
                            </div>
                            
                            <div class="visualization-card">
                                <h3>Oxygen Consumption</h3>
                                <div class="content">
                                    <canvas id="oxygen-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="comparison-tab" class="tab-content">
                        <div class="visualization-container">
                            <div class="visualization-card">
                                <h3>Duration by Behavior Type</h3>
                                <img src="assets/dimensionality_reduction/duration_distribution.png" alt="Duration by Behavior Type">
                            </div>
                            
                            <div class="visualization-card">
                                <h3>Sample Count by Behavior Type</h3>
                                <div class="content">
                                    <canvas id="sample-count-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dimensionality Reduction Section -->
        <section id="dimension">
            <div class="section-content">
                <h2>Dimensionality Reduction</h2>
                <div class="card">
                    <h3>Key Insights from Enhancement Modules</h3>
                    <p>The analysis revealed several critical insights about the whale behavior data structure:</p>
                    <ul>
                        <li><strong>Trustworthiness Score (99.3%):</strong> The PCA embeddings successfully preserve local neighborhood structure from high-dimensional space, ensuring reliable visual interpretation.</li>
                        <li><strong>Feature Importance:</strong> From 167 original features (111 static + 56 sequential), a subset of 40-80 most informative features was identified that maintain high discriminative power while reducing noise.</li>
                        <li><strong>Sensor Significance:</strong> Analysis revealed which sensors (accelerometer, gyroscope, depth) provide the most valuable information for behavior identification.</li>
                        <li><strong>Duration Variability:</strong> Sequence length analysis showed significant variation in behavior durations, requiring careful standardization to balance information preservation and comparability.</li>
                    </ul>
                </div>
                
                <div class="visualization-container">
                    <div class="visualization-row">
                        <div class="visualization-card">
                            <h3>Behavior Separation Matrix</h3>
                            <img src="assets/dimensionality_reduction/behavior_separation_matrix.png" alt="Behavior Separation Matrix">
                            <div class="content">
                                <p>This matrix shows separation clarity between different behaviors. Higher values (lighter colors) indicate better separation between behavior pairs.</p>
                            </div>
                        </div>
                        
                        <div class="visualization-card">
                            <h3>2D Methods Comparison</h3>
                            <img src="assets/dimensionality_reduction/method_comparison_2d.png" alt="2D Methods Comparison">
                            <div class="content">
                                <p>Comparison of different dimensionality reduction methods in 2D. Note how t-SNE emphasizes local clusters while PCA preserves global structure.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="visualization-row">
                        <div class="visualization-card">
                            <h3>Annotation Duration Analysis</h3>
                            <img src="assets/dimensionality_reduction/duration_distribution.png" alt="Annotation Duration Analysis">
                            <div class="content">
                                <p>Distribution of annotation durations across behavior types, with mean duration at 78.38s and median at 59.60s.</p>
                            </div>
                        </div>
                        
                        <div class="visualization-card">
                            <h3>Sequence Length Optimization</h3>
                            <img src="assets/dimensionality_reduction/optimization_results.png" alt="Sequence Length Optimization">
                            <div class="content">
                                <p>Optimization results showing the trade-off between information loss and padding added. Optimal sequence length: 384.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="visualization-row">
                        <div class="visualization-card">
                            <h3>Impact of Sequence Length on Standardization</h3>
                            <img src="assets/dimensionality_reduction/sequence_standardization.png" alt="Impact of Sequence Length on Standardization">
                            <div class="content">
                                <p>Analysis of how different sequence lengths affect downsampling and padding requirements.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Technical Challenges Overcome</h3>
                    <ul>
                        <li><strong>Data Format Consistency:</strong> Resolved inconsistencies in HDF5 file structure to ensure reliable data loading across modules.</li>
                        <li><strong>Error Handling:</strong> Implemented robust handling for edge cases like empty sequences and infinity values to maintain computational stability.</li>
                        <li><strong>Matrix Transformation:</strong> Created an optimized feature matrix with significantly higher signal-to-noise ratio while reducing dimensionality by ~60%.</li>
                        <li><strong>Visualization Clarity:</strong> Improved separation of behavioral classes in reduced space for better interpretability by marine biology experts.</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h3>Combined Impact on Analysis</h3>
                    <p>The integration of enhancement modules transformed the approach from basic dimensionality reduction to an optimized system with:</p>
                    <ul>
                        <li>Higher information density in feature matrices</li>
                        <li>Clearer separation of behavioral classes in visualizations</li>
                        <li>More faithful preservation of important relationships</li>
                        <li>Improved interpretability for domain experts</li>
                        <li>Reduced computational requirements for analysis</li>
                    </ul>
                    <p>These improvements provide a more effective foundation for both visualization and classification tasks, ultimately leading to better insights from marine mammal sensor data.</p>
                </div>
                
                <iframe src="presentation/dimensionality_reduction_slides.html" title="Dimensionality Reduction Slides"></iframe>
            </div>
        </section>

        <!-- Training Section -->
        <section id="training">
            <div class="section-content">
                <h2>Model Training</h2>
                
                <!-- Training Overview -->
                <div class="card">
                    <h3>Training Pipeline</h3>
                    <p>The training process was designed to maximize performance with the limited data available:</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;">
                            <h4 style="margin-top: 0;">Data Preparation</h4>
                            <ul>
                                <li>Standardized sequence length to 384 timesteps</li>
                                <li>Feature scaling per sensor axis</li>
                                <li>SMOTE augmentation for minority classes</li>
                                <li>Class-weighted loss function</li>
                            </ul>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #e74c3c;">
                            <h4 style="margin-top: 0;">Training Configuration</h4>
                            <ul>
                                <li>Batch size: 16 (optimized for small dataset)</li>
                                <li>Learning rate: 1e-4 with Adam optimizer</li>
                                <li>Early stopping with patience of 10 epochs</li>
                                <li>Model checkpointing for best validation accuracy</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Training Process -->
                <div class="card">
                    <h3>Training Process</h3>
                    
                    <div style="margin-top: 15px; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                            <div style="flex: 1; text-align: center; padding: 0 10px;">
                                <div style="font-weight: bold; margin-bottom: 5px;">Step 1: Data Preparation</div>
                                <div>Sequence standardization and feature scaling</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 0 10px;">
                                <div style="font-weight: bold; margin-bottom: 5px;">Step 2: Class Balancing</div>
                                <div>SMOTE augmentation and class weighting</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 0 10px;">
                                <div style="font-weight: bold; margin-bottom: 5px;">Step 3: Model Training</div>
                                <div>minGRU training with early stopping</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 0 10px;">
                                <div style="font-weight: bold; margin-bottom: 5px;">Step 4: Evaluation</div>
                                <div>Direct and hierarchical classification metrics</div>
                            </div>
                        </div>
                    </div>
                    
                    <p style="margin-top: 15px;">The model was trained for an average of 47 epochs, with convergence typically occurring between epochs 35-45. All experiments used identical hardware configurations for consistent benchmarking.</p>
                </div>
                
                <!-- Data Augmentation Strategy -->
                <div class="card">
                    <h3>Data Augmentation Strategy</h3>
                    <p>To address the severe class imbalance, several augmentation techniques were applied:</p>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                        <thead>
                            <tr style="background-color: #f2f2f2;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Augmentation Method</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Impact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;"><strong>SMOTE</strong></td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Synthetic Minority Over-sampling Technique creating artificial samples in feature space</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Increased minority classes from as few as 6 samples to 129 per class</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;"><strong>Class Weighting</strong></td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Loss function adjustment to penalize errors on minority classes more heavily</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">12.4% improvement in recall for underrepresented classes</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;"><strong>Time Shifting</strong></td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Random shifts in sequence starting points during training</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Improved robustness to phase differences in sensor readings</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Performance Considerations -->
                <div class="card">
                    <h3>Performance Considerations</h3>
                    <div style="background-color: #fff3cd; border-left: 5px solid #ffc107; padding: 15px; margin: 15px 0; border-radius: 4px;">
                        <h4 style="color: #856404; margin-top: 0;">Important Note on Metrics</h4>
                        <p>All performance metrics should be considered preliminary due to the extremely limited dataset size. In particular:</p>
                        <ul>
                            <li>The validation set contains only 10 samples across all classes</li>
                            <li>Some behavior classes have only a single example for validation</li>
                            <li>Current metrics primarily demonstrate the pipeline functionality rather than reliable performance</li>
                        </ul>
                    </div>
                    
                    <p>Meaningful performance evaluation will only be possible once additional expert-validated behavior data is acquired from the Parks Lab.</p>
                </div>
            </div>
        </section>

        <!-- Architecture Section -->
        <section id="architecture">
            <div class="section-content">
                <h2>System Architecture</h2>
                
                <!-- System Architecture Diagram (HTML-based) -->
                <div style="max-width: 1000px; margin: 0 auto 30px auto; font-family: 'Arial', sans-serif;">
                    <div style="border: 2px solid #3498db; border-radius: 8px; background: #f8f9fa; padding: 20px;">
                        <h3 style="text-align: center; margin-top: 0; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 10px;">End-to-End Whale Behavior Analysis Pipeline</h3>
                        
                        <!-- Main pipeline stages with flex -->
                        <div style="display: flex; justify-content: space-between; margin: 30px 0; flex-wrap: wrap;">
                            <!-- Data Processing Stage -->
                            <div style="flex: 1; min-width: 220px; margin: 10px; border: 2px solid #3498db; border-radius: 8px; background: #eaf2f8; padding: 15px;">
                                <div style="font-weight: bold; text-align: center; color: #2980b9; margin-bottom: 10px; font-size: 16px;">Data Processing</div>
                                <ul style="margin: 0; padding-left: 20px; font-size: 14px;">
                                    <li style="margin-bottom: 8px;">HDF5 parsing</li>
                                    <li style="margin-bottom: 8px;">Sequence standardization</li>
                                    <li style="margin-bottom: 8px;">Feature scaling</li>
                                    <li style="margin-bottom: 8px;">SMOTE augmentation</li>
                                </ul>
                                <div style="text-align: center; margin-top: 15px;">↓</div>
                            </div>
                            
                            <!-- Feature Extraction -->
                            <div style="flex: 1; min-width: 220px; margin: 10px; border: 2px solid #9b59b6; border-radius: 8px; background: #f5eef8; padding: 15px;">
                                <div style="font-weight: bold; text-align: center; color: #8e44ad; margin-bottom: 10px; font-size: 16px;">Feature Extraction</div>
                                <ul style="margin: 0; padding-left: 20px; font-size: 14px;">
                                    <li style="margin-bottom: 8px;">Signal processing</li>
                                    <li style="margin-bottom: 8px;">Dimensionality reduction</li>
                                    <li style="margin-bottom: 8px;">Feature selection</li>
                                    <li style="margin-bottom: 8px;">Matrix transformation</li>
                                </ul>
                                <div style="text-align: center; margin-top: 15px;">↓</div>
                            </div>
                            
                            <!-- Model Training -->
                            <div style="flex: 1; min-width: 220px; margin: 10px; border: 2px solid #2ecc71; border-radius: 8px; background: #eafaf1; padding: 15px;">
                                <div style="font-weight: bold; text-align: center; color: #27ae60; margin-bottom: 10px; font-size: 16px;">Model Training</div>
                                <ul style="margin: 0; padding-left: 20px; font-size: 14px;">
                                    <li style="margin-bottom: 8px;">minGRU architecture</li>
                                    <li style="margin-bottom: 8px;">Cross-validation</li>
                                    <li style="margin-bottom: 8px;">Hyperparameter tuning</li>
                                    <li style="margin-bottom: 8px;">Early stopping</li>
                                </ul>
                                <div style="text-align: center; margin-top: 15px;">↓</div>
                            </div>
                            
                            <!-- Behavior Classification -->
                            <div style="flex: 1; min-width: 220px; margin: 10px; border: 2px solid #e74c3c; border-radius: 8px; background: #fdedec; padding: 15px;">
                                <div style="font-weight: bold; text-align: center; color: #c0392b; margin-bottom: 10px; font-size: 16px;">Behavior Classification</div>
                                <ul style="margin: 0; padding-left: 20px; font-size: 14px;">
                                    <li style="margin-bottom: 8px;">Direct classification</li>
                                    <li style="margin-bottom: 8px;">Hierarchical grouping</li>
                                    <li style="margin-bottom: 8px;">Confidence scoring</li>
                                    <li style="margin-bottom: 8px;">Post-processing</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- DataFlow and Visualization Section -->
                        <div style="display: flex; flex-wrap: wrap; margin-top: 10px; border-top: 1px dashed #bbb; padding-top: 20px;">
                            <!-- User Interfaces -->
                            <div style="flex: 2; min-width: 280px; margin: 10px; border: 2px solid #f1c40f; border-radius: 8px; background: #fcf3cf; padding: 15px;">
                                <div style="font-weight: bold; text-align: center; color: #d35400; margin-bottom: 10px; font-size: 16px;">Visualization Interfaces</div>
                                
                                <div style="display: flex; flex-wrap: wrap; justify-content: space-around;">
                                    <div style="background: white; border: 1px solid #ddd; border-radius: 5px; padding: 10px; margin: 5px; min-width: 100px; text-align: center; font-size: 13px;">
                                        Dive Overview
                                    </div>
                                    <div style="background: white; border: 1px solid #ddd; border-radius: 5px; padding: 10px; margin: 5px; min-width: 100px; text-align: center; font-size: 13px;">
                                        Hierarchical Views
                                    </div>
                                    <div style="background: white; border: 1px solid #ddd; border-radius: 5px; padding: 10px; margin: 5px; min-width: 100px; text-align: center; font-size: 13px;">
                                        Metrics Dashboard
                                    </div>
                                    <div style="background: white; border: 1px solid #ddd; border-radius: 5px; padding: 10px; margin: 5px; min-width: 100px; text-align: center; font-size: 13px;">
                                        Behavior Explorer
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Data Storage -->
                            <div style="flex: 1; min-width: 220px; margin: 10px; border: 2px solid #34495e; border-radius: 8px; background: #ebedef; padding: 15px;">
                                <div style="font-weight: bold; text-align: center; color: #2c3e50; margin-bottom: 10px; font-size: 16px;">Data Storage</div>
                                
                                <div style="background: white; border: 1px solid #ddd; border-radius: 5px; padding: 10px; margin: 5px 0; font-size: 13px;">
                                    <div style="font-weight: bold; margin-bottom: 5px;">Raw Sensor Data</div>
                                    <div style="color: #777; font-size: 12px;">HDF5 (200 Hz)</div>
                                </div>
                                
                                <div style="background: white; border: 1px solid #ddd; border-radius: 5px; padding: 10px; margin: 10px 0; font-size: 13px;">
                                    <div style="font-weight: bold; margin-bottom: 5px;">Feature Matrices</div>
                                    <div style="color: #777; font-size: 12px;">Numpy Arrays</div>
                                </div>
                                
                                <div style="background: white; border: 1px solid #ddd; border-radius: 5px; padding: 10px; margin: 10px 0; font-size: 13px;">
                                    <div style="font-weight: bold; margin-bottom: 5px;">Model Weights</div>
                                    <div style="color: #777; font-size: 12px;">H5 Format</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="background-color: #fff3cd; border-left: 5px solid #ffc107; padding: 15px; margin-bottom: 20px;">
                    <h3 style="color: #856404; margin-top: 0;">Data Limitation Notice</h3>
                    <p><strong>Important:</strong> Current metrics are essentially meaningless and should NOT be interpreted as indicative of model performance. The model is trained on an extremely limited dataset:</p>
                    <ul>
                        <li>Only ~20,000 frames total with just 50 expert annotations across all behavior classes</li>
                        <li>Most behaviors have fewer than 10 labeled examples, some as few as 1 single sample</li>
                        <li>Validation is fundamentally impossible given the extreme data scarcity</li>
                        <li>SMOTE augmentation and class weighting cannot overcome the core issue of insufficient ground truth data</li>
                    </ul>
                    <p>Performance metrics will only become meaningful once additional labeled data is acquired from the Parks Lab, particularly for underrepresented behavior classes.</p>
                </div>
                
                <!-- Performance Metrics Card -->
                <div class="card">
                    <h3>Whale Behavior Classification Performance</h3>
                    <div style="display: flex; justify-content: space-between; flex-wrap: wrap; margin-top: 20px;">
                        <div style="flex: 1; min-width: 200px; background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 10px; border-left: 4px solid #3498db;">
                            <h4 style="color: #3498db; margin-top: 0;">Validation Accuracy</h4>
                            <div style="font-size: 28px; font-weight: bold; margin: 15px 0;">57.2%</div>
                            <div style="color: #7f8c8d;">Individual Behaviors</div>
                            <div style="color: #7f8c8d; font-size: 12px;">(9 distinct classes)</div>
                        </div>
                        <div style="flex: 1; min-width: 200px; background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 10px; border-left: 4px solid #e74c3c;">
                            <h4 style="color: #e74c3c; margin-top: 0;">Hierarchical Accuracy</h4>
                            <div style="font-size: 28px; font-weight: bold; margin: 15px 0;">63.1%</div>
                            <div style="color: #7f8c8d;">Behavior Groups</div>
                            <div style="color: #7f8c8d; font-size: 12px;">(feeding, movement, etc.)</div>
                        </div>
                        <div style="flex: 1; min-width: 200px; background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 10px; border-left: 4px solid #2ecc71;">
                            <h4 style="color: #2ecc71; margin-top: 0;">Training Accuracy</h4>
                            <div style="font-size: 28px; font-weight: bold; margin: 15px 0;">72.3%</div>
                            <div style="color: #7f8c8d;">With SMOTE &amp; Weights</div>
                            <div style="color: #7f8c8d; font-size: 12px;">(balanced from 6→129 samples)</div>
                        </div>
                    </div>
                </div>
                
                <!-- minGRU Architecture -->
                <div class="card">
                    <h3>minGRU Architecture</h3>
                    <p>The minGRU (Minimal Gated Recurrent Unit) architecture offers several advantages for whale behavior classification:</p>
                    
                    <!-- HTML-based architecture diagram instead of SVG -->
                    <div style="max-width: 900px; margin: 30px auto; font-family: 'Arial', sans-serif;">
                        <!-- Architecture Overview Diagram -->
                        <div style="border: 2px solid #3498db; border-radius: 8px; background: #f8f9fa; padding: 20px; margin-bottom: 30px;">
                            <h4 style="text-align: center; margin-top: 0; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 10px;">minGRU Network Architecture</h4>
                            
                            <!-- Layer Flow Diagram -->
                            <div style="display: flex; justify-content: space-between; align-items: center; margin: 20px 0;">
                                <!-- Input Layer -->
                                <div style="width: 120px; height: 80px; background: #e8f4f8; border: 2px solid #3498db; border-radius: 8px; display: flex; justify-content: center; align-items: center; text-align: center; padding: 10px; box-sizing: border-box;">
                                    <div>
                                        <div style="font-weight: bold; font-size: 14px;">Input</div>
                                        <div style="font-size: 12px; margin-top: 5px;">(b, 384, 9)</div>
                                    </div>
                                </div>
                                
                                <!-- Arrow -->
                                <div style="width: 40px; text-align: center;">→</div>
                                
                                <!-- minGRU Layer -->
                                <div style="width: 140px; height: 80px; background: #e8f8f4; border: 2px solid #2ecc71; border-radius: 8px; display: flex; justify-content: center; align-items: center; text-align: center; padding: 10px; box-sizing: border-box;">
                                    <div>
                                        <div style="font-weight: bold; font-size: 14px;">minGRU</div>
                                        <div style="font-size: 12px; margin-top: 5px;">64 units</div>
                                    </div>
                                </div>
                                
                                <!-- Arrow -->
                                <div style="width: 40px; text-align: center;">→</div>
                                
                                <!-- Dropout Layer -->
                                <div style="width: 120px; height: 80px; background: #f8e8f8; border: 2px solid #9b59b6; border-radius: 8px; display: flex; justify-content: center; align-items: center; text-align: center; padding: 10px; box-sizing: border-box;">
                                    <div>
                                        <div style="font-weight: bold; font-size: 14px;">Dropout</div>
                                        <div style="font-size: 12px; margin-top: 5px;">rate = 0.3</div>
                                    </div>
                                </div>
                                
                                <!-- Arrow -->
                                <div style="width: 40px; text-align: center;">→</div>
                                
                                <!-- Dense Layer -->
                                <div style="width: 120px; height: 80px; background: #f8f4e8; border: 2px solid #f39c12; border-radius: 8px; display: flex; justify-content: center; align-items: center; text-align: center; padding: 10px; box-sizing: border-box;">
                                    <div>
                                        <div style="font-weight: bold; font-size: 14px;">Dense</div>
                                        <div style="font-size: 12px; margin-top: 5px;">32 units</div>
                                    </div>
                                </div>
                                
                                <!-- Arrow -->
                                <div style="width: 40px; text-align: center;">→</div>
                                
                                <!-- Output Layer -->
                                <div style="width: 120px; height: 80px; background: #f8e8e8; border: 2px solid #e74c3c; border-radius: 8px; display: flex; justify-content: center; align-items: center; text-align: center; padding: 10px; box-sizing: border-box;">
                                    <div>
                                        <div style="font-weight: bold; font-size: 14px;">Output</div>
                                        <div style="font-size: 12px; margin-top: 5px;">9 classes</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Parameter Count -->
                            <div style="background: #eee; padding: 10px; border-radius: 5px; font-size: 14px; text-align: center; margin-top: 15px;">
                                Total Parameters: <span style="font-weight: bold;">39,690</span> (vs. ~120K for standard GRU)
                            </div>
                        </div>
                        
                        <!-- minGRU Cell Structure -->
                        <div style="border: 2px solid #2ecc71; border-radius: 8px; background: #f8f9fa; padding: 20px; margin-bottom: 20px;">
                            <h4 style="text-align: center; margin-top: 0; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 10px;">minGRU Cell Structure</h4>
                            
                            <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                                <!-- Update Gate -->
                                <div style="width: 45%; background: #e8f8ec; border: 1px solid #2ecc71; border-radius: 8px; padding: 15px;">
                                    <div style="font-weight: bold; text-align: center; margin-bottom: 10px; color: #27ae60;">Update Gate (z)</div>
                                    <div style="background: #fff; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 14px; overflow-wrap: break-word;">
                                        z<sub>t</sub> = σ(W<sub>z</sub>x<sub>t</sub> + U<sub>z</sub>h<sub>t-1</sub> + b<sub>z</sub>)
                                    </div>
                                    <div style="margin-top: 10px; font-size: 13px; color: #555;">
                                        Controls how much of the previous hidden state to keep
                                    </div>
                                </div>
                                
                                <!-- Reset Gate -->
                                <div style="width: 45%; background: #e8f1f8; border: 1px solid #3498db; border-radius: 8px; padding: 15px;">
                                    <div style="font-weight: bold; text-align: center; margin-bottom: 10px; color: #2980b9;">Reset Gate (r)</div>
                                    <div style="background: #fff; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 14px; overflow-wrap: break-word;">
                                        r<sub>t</sub> = σ(W<sub>r</sub>x<sub>t</sub> + U<sub>r</sub>h<sub>t-1</sub> + b<sub>r</sub>)
                                    </div>
                                    <div style="margin-top: 10px; font-size: 13px; color: #555;">
                                        Controls access to previous hidden state when computing new content
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Hidden State Update -->
                            <div style="background: #f5f5f5; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-top: 15px;">
                                <div style="font-weight: bold; text-align: center; margin-bottom: 10px;">Hidden State Update</div>
                                <div style="background: #fff; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 14px; text-align: center; overflow-wrap: break-word;">
                                    h̃<sub>t</sub> = tanh(W<sub>h</sub>x<sub>t</sub> + r<sub>t</sub> ⊙ (U<sub>h</sub>h<sub>t-1</sub>) + b<sub>h</sub>)<br>
                                    h<sub>t</sub> = (1 - z<sub>t</sub>) ⊙ h<sub>t-1</sub> + z<sub>t</sub> ⊙ h̃<sub>t</sub>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 15px; margin-top: 20px;">
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;">
                            <h4 style="margin-top: 0;">Architecture Highlights</h4>
                            <ul>
                                <li>Two gates instead of three (compared to LSTM), reducing parameter count by ~67%</li>
                                <li>Faster training convergence with limited data (47 epochs average)</li>
                                <li>More efficient inference on resource-constrained devices</li>
                                <li>Better regularization properties for small datasets</li>
                            </ul>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #e74c3c;">
                            <h4 style="margin-top: 0;">Training Configuration</h4>
                            <ul>
                                <li>Learning rate: 0.001 with Adam optimizer</li>
                                <li>Batch size: 16 (optimized for small dataset)</li>
                                <li>Early stopping with patience of 10 epochs</li>
                                <li>Gradient clipping to prevent exploding gradients</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Challenges & Solutions -->
                <div class="card">
                    <h3>Challenges &amp; Solutions</h3>
                    
                    <!-- HTML-based Challenges & Solutions diagram -->
                    <div style="max-width: 1000px; margin: 20px auto; font-family: 'Arial', sans-serif;">
                        <!-- Row 1: Data Challenges -->
                        <div style="display: flex; flex-wrap: wrap; margin-bottom: 25px; position: relative;">
                            <!-- Challenge Box -->
                            <div style="flex: 1; min-width: 280px; margin-right: 50px; margin-bottom: 15px;">
                                <div style="border: 2px solid #e74c3c; border-radius: 8px; background: #fdedec; padding: 15px;">
                                    <h4 style="margin-top: 0; color: #c0392b; border-bottom: 1px solid #f5b7b1; padding-bottom: 8px;">
                                        <span style="background: #e74c3c; color: white; border-radius: 50%; width: 28px; height: 28px; display: inline-block; text-align: center; margin-right: 8px;">
                                            <span style="line-height: 28px;">!</span>
                                        </span>
                                        Data Challenges
                                    </h4>
                                    <ul style="margin: 10px 0; padding-left: 20px;">
                                        <li style="margin-bottom: 8px;">Extreme data scarcity (only 50 annotations)</li>
                                        <li style="margin-bottom: 8px;">Severe class imbalance (6 vs 216 samples)</li>
                                        <li style="margin-bottom: 8px;">High-dimensional sensor data (3 axes × 384 timesteps)</li>
                                        <li style="margin-bottom: 8px;">Insufficient examples for proper validation</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- Solution Box -->
                            <div style="flex: 1; min-width: 280px;">
                                <div style="border: 2px solid #27ae60; border-radius: 8px; background: #e9f7ef; padding: 15px;">
                                    <h4 style="margin-top: 0; color: #27ae60; border-bottom: 1px solid #a9dfbf; padding-bottom: 8px;">
                                        <span style="background: #27ae60; color: white; border-radius: 50%; width: 28px; height: 28px; display: inline-block; text-align: center; margin-right: 8px;">
                                            <span style="line-height: 28px;">✓</span>
                                        </span>
                                        Data Solutions
                                    </h4>
                                    <ul style="margin: 10px 0; padding-left: 20px;">
                                        <li style="margin-bottom: 8px;">SMOTE augmentation to create synthetic samples</li>
                                        <li style="margin-bottom: 8px;">Class weighting in loss function (12.4% recall improvement)</li>
                                        <li style="margin-bottom: 8px;">Dimensionality reduction to 40-80 critical features</li>
                                        <li style="margin-bottom: 8px;">Working with Parks Lab to obtain additional annotations</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- Connecting arrow -->
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); margin-left: -30px; width: 60px; text-align: center; font-size: 24px; color: #7f8c8d;">
                                →
                            </div>
                        </div>
                        
                        <!-- Row 2: Model Challenges -->
                        <div style="display: flex; flex-wrap: wrap; margin-bottom: 15px; position: relative;">
                            <!-- Challenge Box -->
                            <div style="flex: 1; min-width: 280px; margin-right: 50px; margin-bottom: 15px;">
                                <div style="border: 2px solid #3498db; border-radius: 8px; background: #ebf5fb; padding: 15px;">
                                    <h4 style="margin-top: 0; color: #2980b9; border-bottom: 1px solid #aed6f1; padding-bottom: 8px;">
                                        <span style="background: #3498db; color: white; border-radius: 50%; width: 28px; height: 28px; display: inline-block; text-align: center; margin-right: 8px;">
                                            <span style="line-height: 28px;">!</span>
                                        </span>
                                        Model Challenges
                                    </h4>
                                    <ul style="margin: 10px 0; padding-left: 20px;">
                                        <li style="margin-bottom: 8px;">Training instability with small datasets</li>
                                        <li style="margin-bottom: 8px;">Overfitting with standard architectures</li>
                                        <li style="margin-bottom: 8px;">Limited generalization to unseen whales</li>
                                        <li style="margin-bottom: 8px;">Difficulty distinguishing similar behaviors</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- Solution Box -->
                            <div style="flex: 1; min-width: 280px;">
                                <div style="border: 2px solid #9b59b6; border-radius: 8px; background: #f4ecf7; padding: 15px;">
                                    <h4 style="margin-top: 0; color: #8e44ad; border-bottom: 1px solid #d7bde2; padding-bottom: 8px;">
                                        <span style="background: #9b59b6; color: white; border-radius: 50%; width: 28px; height: 28px; display: inline-block; text-align: center; margin-right: 8px;">
                                            <span style="line-height: 28px;">✓</span>
                                        </span>
                                        Model Solutions
                                    </h4>
                                    <ul style="margin: 10px 0; padding-left: 20px;">
                                        <li style="margin-bottom: 8px;">minGRU architecture with 39,690 parameters (67% reduction)</li>
                                        <li style="margin-bottom: 8px;">Hierarchical classification approach (behavior groups)</li>
                                        <li style="margin-bottom: 8px;">Cross-validation with leave-one-out by whale ID</li>
                                        <li style="margin-bottom: 8px;">Gradient clipping and dropout regularization</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- Connecting arrow -->
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); margin-left: -30px; width: 60px; text-align: center; font-size: 24px; color: #7f8c8d;">
                                →
                            </div>
                        </div>
                        
                        <!-- Impact Box -->
                        <div style="margin-top: 20px; border: 2px solid #f39c12; border-radius: 8px; background: #fef9e7; padding: 15px;">
                            <h4 style="margin-top: 0; color: #d35400; text-align: center; border-bottom: 1px solid #fdebd0; padding-bottom: 8px;">
                                Impact of Solutions
                            </h4>
                            <div style="display: flex; flex-wrap: wrap; justify-content: space-around; margin-top: 10px;">
                                <div style="flex: 1; min-width: 200px; background: white; border: 1px solid #eee; border-radius: 8px; padding: 12px; margin: 5px; text-align: center;">
                                    <div style="font-weight: bold; color: #e74c3c; font-size: 20px;">57.2%</div>
                                    <div style="font-size: 14px; margin-top: 5px;">Individual Behavior Accuracy</div>
                                </div>
                                <div style="flex: 1; min-width: 200px; background: white; border: 1px solid #eee; border-radius: 8px; padding: 12px; margin: 5px; text-align: center;">
                                    <div style="font-weight: bold; color: #3498db; font-size: 20px;">63.1%</div>
                                    <div style="font-size: 14px; margin-top: 5px;">Hierarchical Accuracy</div>
                                </div>
                                <div style="flex: 1; min-width: 200px; background: white; border: 1px solid #eee; border-radius: 8px; padding: 12px; margin: 5px; text-align: center;">
                                    <div style="font-weight: bold; color: #27ae60; font-size: 20px;">72.3%</div>
                                    <div style="font-size: 14px; margin-top: 5px;">Training Accuracy</div>
                                </div>
                            </div>
                            <div style="background-color: #fff3cd; border-left: 5px solid #ffc107; padding: 12px; margin-top: 15px; font-size: 14px; color: #856404;">
                                <strong>Note:</strong> These metrics are preliminary and primarily demonstrate pipeline functionality rather than reliable performance, due to the extreme data limitations.
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Hierarchical Classification -->
                <div class="card">
                    <h3>Hierarchical Classification</h3>
                    <p>To improve performance, behaviors are grouped into higher-level categories:</p>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                        <thead>
                            <tr style="background-color: #f2f2f2;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Behavior Group</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Individual Behaviors</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;" rowspan="4">Feeding</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Feeding_loop</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Circular movement while feeding</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Kick_feeding</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Rapid tail movement to stun prey</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Noodle_feeding</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Side-to-side head movement while feeding</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Vertical_loop</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Vertical circular motion during feeding</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;" rowspan="3">Movement</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Side_rolls</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Rotation along longitudinal axis</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Side_rolls_and_loop</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Combined rolling and circular movement</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Traveling</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Directed linear movement</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Exploratory</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Exploratory_dives</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Investigation of environment without feeding</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Surface</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Surface_Active</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">Activity at or near the surface</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <p style="margin-top: 15px;">Even when the model makes errors on specific behaviors, it often correctly identifies the behavioral group (63.1% group accuracy vs. 57.2% individual accuracy).</p>
                </div>
                
                <!-- Implementation Details -->
                <div class="card">
                    <h3>Implementation Details</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div>
                            <h4>Data Pipeline</h4>
                            <ul>
                                <li>HDF5 format for efficient data storage</li>
                                <li>Real-time SMOTE augmentation during training</li>
                                <li>Sequence standardization to 384 timesteps</li>
                                <li>Feature scaling and normalization</li>
                            </ul>
                        </div>
                        <div>
                            <h4>Training Approach</h4>
                            <ul>
                                <li>Adam optimizer with 1e-4 learning rate</li>
                                <li>Class weighting to handle imbalance</li>
                                <li>Early stopping on validation accuracy</li>
                                <li>Cross-validation with leave-one-out by whale</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Conclusions Section -->
        <section id="conclusions">
            <div class="section-content">
                <h2>Conclusions</h2>
                
                <div class="subsection">
                    <h3>Critical Data Limitations</h3>
                    <ul>
                        <li><strong>Extreme Data Scarcity:</strong> The current dataset consists of only ~20,000 frames with just 50 expert annotations total across all behavior classes.</li>
                        <li><strong>Insufficient Examples:</strong> Most behavior classes have fewer than 10 samples, with some having only a single example.</li>
                        <li><strong>Validation Impossible:</strong> Current metrics are essentially meaningless without a proper validation dataset containing ground truth labels for the behaviors used in training.</li>
                        <li><strong>Augmentation Limits:</strong> While SMOTE augmentation and class weighting were implemented, they cannot overcome the fundamental lack of diverse real-world examples.</li>
                    </ul>
                </div>

                <div class="subsection">
                    <h3>Primary Data Needs</h3>
                    <p>This project <strong>urgently requires</strong> additional expert-validated behavior annotations from the Parks Lab, particularly for:</p>
                    <ul>
                        <li>Underrepresented behavior classes with fewer than 10 examples</li>
                        <li>A proper validation set with sufficient examples of each behavior class</li>
                        <li>More diverse contexts and environmental conditions</li>
                    </ul>
                </div>

                <div class="subsection">
                    <h3>Future Work</h3>
                    <ul>
                        <li><strong>Annotation Acquisition:</strong> Pending additional expert annotations from the Parks Lab.</li>
                        <li><strong>Model Refinement:</strong> Fine-tuning of architecture and parameters once sufficient data is available.</li>
                        <li><strong>Performance Improvement:</strong> Expected significant performance gains once data limitations are addressed.</li>
                        <li><strong>Transfer Learning:</strong> Exploration of transfer learning approaches to maximize utility of limited data.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Resources Section -->
        <section id="resources">
            <div class="section-content">
                <h2>Scientific Resources</h2>
                <div class="card">
                    <h3>Key References and Resources</h3>
                    <ul class="resources">
                        <li>Johnson, M. P., & Tyack, P. L. (2003). A digital acoustic recording tag for measuring the response of wild marine mammals to sound. IEEE Journal of Oceanic Engineering, 28(1), 3-12.</li>
                        <li>Goldbogen, J. A., et al. (2017). Using accelerometers to determine the calling behavior of tagged baleen whales. Journal of Experimental Biology, 220(22), 4150-4159.</li>
                        <li>Cade, D. E., et al. (2018). Kinematic diversity in rorqual whale feeding mechanisms. Current Biology, 28(19), 3204-3213.</li>
                        <li>Friedlaender, A. S., et al. (2016). Multiple-stage decisions in a marine central-place forager. Royal Society Open Science, 3(10), 160043.</li>
                        <li>Williams, T. M. (1999). The evolution of cost efficient swimming in marine mammals: limits to energetic optimization. Philosophical Transactions of the Royal Society of London. Series B: Biological Sciences, 354(1380), 193-201.</li>
                        <li>Ware, C., Friedlaender, A. S., & Nowacek, D. P. (2011). Shallow and deep lunge feeding of humpback whales in fjords of the West Antarctic Peninsula. Marine Mammal Science, 27(3), 587-605.</li>
                        <li>Baumgartner, M. F., & Mate, B. R. (2003). Summertime foraging ecology of North Atlantic right whales. Marine Ecology Progress Series, 264, 123-135.</li>
                        <li>Feng, L., Tung, F., Ahmed, M. O., Bengio, Y., & Hajimirsadeghi, H. (2024). Were RNNs All We Needed? Revisiting Minimal RNNs for Sequential Tasks. arXiv:2410.01201.</li>
                        <li>Patil, P., et al. (2023). Searching for Efficient Neural Architectures for On-Device ML: Model Complexity and Hardware Constraints. Available at: https://pratikpatil.io/papers/model-complexity.pdf</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <script src="js/main.js"></script>
    <script src="presentation/presentation_helper.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the frame viewer
            if (typeof initFrameViewer === 'function') {
                initFrameViewer();
            }
            
            // Initialize smooth scrolling
            if (typeof initSmoothScrolling === 'function') {
                initSmoothScrolling();
            }
            
            // Tab functionality
            window.openTab = function(tabId) {
                // Hide all tabs
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Show selected tab
                document.getElementById(tabId).classList.add('active');
                
                // Update button states
                document.querySelectorAll('.tab-button').forEach(button => {
                    button.classList.remove('active');
                });
                event.currentTarget.classList.add('active');
            };
            
            // Dashboard dive selector
            const diveSlider = document.getElementById('dive-slider');
            const selectedDiveNumber = document.getElementById('selected-dive-number');
            
            // Sample data for demonstration - in a real implementation this would come from an API or data file
            const diveData = [
                { maxDepth: "124.3 m", duration: "175 s", descentRate: "1.7 m/s", ascentRate: "1.2 m/s", twistiness: "0.68", energyCost: "1240 J", rollVariance: "0.47", behaviorClass: "Foraging" },
                { maxDepth: "87.1 m", duration: "142 s", descentRate: "1.3 m/s", ascentRate: "1.5 m/s", twistiness: "0.42", energyCost: "980 J", rollVariance: "0.38", behaviorClass: "Exploratory" },
                { maxDepth: "156.7 m", duration: "216 s", descentRate: "1.9 m/s", ascentRate: "1.1 m/s", twistiness: "0.71", energyCost: "1380 J", rollVariance: "0.52", behaviorClass: "Feeding" },
                { maxDepth: "61.5 m", duration: "98 s", descentRate: "1.1 m/s", ascentRate: "1.4 m/s", twistiness: "0.34", energyCost: "760 J", rollVariance: "0.29", behaviorClass: "Traveling" },
                { maxDepth: "112.8 m", duration: "163 s", descentRate: "1.6 m/s", ascentRate: "1.3 m/s", twistiness: "0.57", energyCost: "1120 J", rollVariance: "0.41", behaviorClass: "Side rolls" }
            ];
            
            // Update metrics based on selected dive
            function updateDiveMetrics(diveIndex) {
                const index = diveIndex % diveData.length; // Cycle through our sample data
                const dive = diveData[index];
                
                document.getElementById('max-depth').textContent = dive.maxDepth;
                document.getElementById('duration').textContent = dive.duration;
                document.getElementById('descent-rate').textContent = dive.descentRate;
                document.getElementById('ascent-rate').textContent = dive.ascentRate;
                document.getElementById('twistiness').textContent = dive.twistiness;
                document.getElementById('energy-cost').textContent = dive.energyCost;
                document.getElementById('roll-variance').textContent = dive.rollVariance;
                document.getElementById('behavior-class').textContent = dive.behaviorClass;
            }
            
            diveSlider.addEventListener('input', function() {
                const diveNumber = this.value;
                selectedDiveNumber.textContent = diveNumber;
                updateDiveMetrics(diveNumber - 1);
            });
            
            // Initialize with first dive
            updateDiveMetrics(0);
            
            // ======= Modal Functionality =======
            const modal = document.getElementById('rubricModal');
            const rubricSlides = document.querySelectorAll('.rubric-slide');
            const closeButtons = document.querySelectorAll('.close-modal');
            
            // Slide mapping to sections
            const slideMapping = {
                'title': 'title-slide',
                'problem': 'problem-slide',
                'solution': 'solution-slide',
                'data': 'data-slide',
                'results': 'results-slide',
                'challenges': 'challenges-slide',
                'plan': 'plan-slide'
            };
            
            // Show a specific slide
            function showSlide(slideId) {
                // Hide all slides first
                rubricSlides.forEach(slide => {
                    slide.style.display = 'none';
                });
                
                // Show the requested slide
                const slideToShow = document.getElementById(slideId);
                if (slideToShow) {
                    slideToShow.style.display = 'block';
                }
                
                // Show the modal
                modal.classList.add('show');
            }
            
            // Close the modal
            function closeModal() {
                modal.classList.remove('show');
                
                // After animation completes, hide all slides
                setTimeout(() => {
                    rubricSlides.forEach(slide => {
                        slide.style.display = 'none';
                    });
                }, 300);
            }
            
            // Close modal when clicking the X button
            closeButtons.forEach(button => {
                button.addEventListener('click', closeModal);
            });
            
            // Close modal when clicking outside the slide content
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Close modal when pressing Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
            
            // Rubric navigation functions
            window.scrollToSection = function(sectionId) {
                // First, show the modal with appropriate slide
                const slideId = slideMapping[sectionId];
                if (slideId) {
                    showSlide(slideId);
                }
                
                // Store the target section ID for later scroll after modal closes
                window.targetSectionId = sectionId;
                
                // Map rubric sections to existing sections
                const sectionMapping = {
                    'title': 'overview',
                    'problem': 'overview',
                    'solution': 'hierarchical',
                    'data': 'frames',
                    'results': 'dimension',
                    'challenges': 'architecture',
                    'plan': 'conclusions'
                };
                
                // Update active nav item
                document.querySelectorAll('.rubric-nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                event.currentTarget.classList.add('active');
            };
            
            // When modal is closed, scroll to the target section
            document.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    if (window.targetSectionId) {
                        const sectionMapping = {
                            'title': 'overview',
                            'problem': 'overview',
                            'solution': 'hierarchical',
                            'data': 'frames',
                            'results': 'dimension',
                            'challenges': 'architecture',
                            'plan': 'conclusions'
                        };
                        
                        // Get the corresponding section
                        const targetSection = sectionMapping[window.targetSectionId] || window.targetSectionId;
                        const section = document.getElementById(targetSection);
                        
                        if (section) {
                            setTimeout(() => {
                                window.scrollTo({
                                    top: section.offsetTop - 120, // Offset for both nav bars
                                    behavior: 'smooth'
                                });
                            }, 100);
                        }
                        
                        // Reset the target section
                        window.targetSectionId = null;
                    }
                });
            });
            
            // Highlight nav item based on scroll position
            window.addEventListener('scroll', function() {
                const scrollPosition = window.scrollY;
                const sectionMapping = {
                    'overview': ['title', 'problem'],
                    'frames': ['data'],
                    'hierarchical': ['solution'],
                    'dimension': ['results'],
                    'training': ['results'],
                    'architecture': ['challenges'],
                    'conclusions': ['plan']
                };
                
                // Check each section
                for (const [section, rubricSections] of Object.entries(sectionMapping)) {
                    const element = document.getElementById(section);
                    if (!element) continue;
                    
                    const sectionTop = element.offsetTop - 150;
                    const sectionHeight = element.offsetHeight;
                    
                    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                        // Highlight corresponding rubric nav items
                        document.querySelectorAll('.rubric-nav-item').forEach(item => {
                            item.classList.remove('active');
                        });
                        
                        rubricSections.forEach(rubricSection => {
                            const navItem = document.querySelector(`.rubric-nav-item[onclick="scrollToSection('${rubricSection}')"]`);
                            if (navItem) {
                                navItem.classList.add('active');
                            }
                        });
                    }
                }
            });
        });
    </script>
</body>
</html> 